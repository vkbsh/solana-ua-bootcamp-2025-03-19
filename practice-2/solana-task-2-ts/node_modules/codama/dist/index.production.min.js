"use strict";var globalThis=globalThis||{};globalThis.codama=(()=>{var Na=Object.create;var Le=Object.defineProperty;var va=Object.getOwnPropertyDescriptor;var ga=Object.getOwnPropertyNames;var Ta=Object.getPrototypeOf,ha=Object.prototype.hasOwnProperty;var Va=(e,t,n)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Aa=(e,t)=>{for(var n in t)Le(e,n,{get:t[n],enumerable:!0})},kn=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of ga(t))!ha.call(e,u)&&u!==n&&Le(e,u,{get:()=>t[u],enumerable:!(r=va(t,u))||r.enumerable});return e};var Oa=(e,t,n)=>(n=e!=null?Na(Ta(e)):{},kn(t||!e||!e.__esModule?Le(n,"default",{value:e,enumerable:!0}):n,e)),Sa=e=>kn(Le({},"__esModule",{value:!0}),e);var we=(e,t,n)=>Va(e,typeof t!="symbol"?t+"":t,n);var oi=h((sc,ii)=>{"use strict";var Ct,T,ti={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Zr;function de(e){throw{name:"SyntaxError",message:e,at:Ct,text:Zr}}function S(e){return e&&e!==T&&de("Expected '"+e+"' instead of '"+T+"'"),T=Zr.charAt(Ct),Ct+=1,T}function ri(){var e,t="";for(T==="-"&&(t="-",S("-"));T>="0"&&T<="9";)t+=T,S();if(T===".")for(t+=".";S()&&T>="0"&&T<="9";)t+=T;if(T==="e"||T==="E")for(t+=T,S(),(T==="-"||T==="+")&&(t+=T,S());T>="0"&&T<="9";)t+=T,S();return e=Number(t),isFinite(e)||de("Bad number"),e}function ni(){var e,t,n="",r;if(T==='"')for(;S();){if(T==='"')return S(),n;if(T==="\\")if(S(),T==="u"){for(r=0,t=0;t<4&&(e=parseInt(S(),16),!!isFinite(e));t+=1)r=r*16+e;n+=String.fromCharCode(r)}else if(typeof ti[T]=="string")n+=ti[T];else break;else n+=T}de("Bad string")}function ae(){for(;T&&T<=" ";)S()}function rs(){switch(T){case"t":return S("t"),S("r"),S("u"),S("e"),!0;case"f":return S("f"),S("a"),S("l"),S("s"),S("e"),!1;case"n":return S("n"),S("u"),S("l"),S("l"),null;default:de("Unexpected '"+T+"'")}}function ns(){var e=[];if(T==="["){if(S("["),ae(),T==="]")return S("]"),e;for(;T;){if(e.push(xt()),ae(),T==="]")return S("]"),e;S(","),ae()}}de("Bad array")}function is(){var e,t={};if(T==="{"){if(S("{"),ae(),T==="}")return S("}"),t;for(;T;){if(e=ni(),ae(),S(":"),Object.prototype.hasOwnProperty.call(t,e)&&de('Duplicate key "'+e+'"'),t[e]=xt(),ae(),T==="}")return S("}"),t;S(","),ae()}}de("Bad object")}function xt(){switch(ae(),T){case"{":return is();case"[":return ns();case'"':return ni();case"-":return ri();default:return T>="0"&&T<="9"?ri():rs()}}ii.exports=function(e,t){var n;return Zr=e,Ct=0,T=" ",n=xt(),ae(),T&&de("Syntax error"),typeof t=="function"?function r(u,o){var s,a,i=u[o];if(i&&typeof i=="object")for(s in xt)Object.prototype.hasOwnProperty.call(i,s)&&(a=r(i,s),typeof a>"u"?delete i[s]:i[s]=a);return t.call(u,o,i)}({"":n},""):n}});var si=h((uc,ai)=>{"use strict";var Xr=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,G,Lt,os={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},he;function Qr(e){return Xr.lastIndex=0,Xr.test(e)?'"'+e.replace(Xr,function(t){var n=os[t];return typeof n=="string"?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function wt(e,t){var n,r,u,o,s=G,a,i=t[e];switch(i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(e)),typeof he=="function"&&(i=he.call(t,e,i)),typeof i){case"string":return Qr(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(G+=Lt,a=[],Object.prototype.toString.apply(i)==="[object Array]"){for(o=i.length,n=0;n<o;n+=1)a[n]=wt(n,i)||"null";return u=a.length===0?"[]":G?`[
`+G+a.join(`,
`+G)+`
`+s+"]":"["+a.join(",")+"]",G=s,u}if(he&&typeof he=="object")for(o=he.length,n=0;n<o;n+=1)r=he[n],typeof r=="string"&&(u=wt(r,i),u&&a.push(Qr(r)+(G?": ":":")+u));else for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(u=wt(r,i),u&&a.push(Qr(r)+(G?": ":":")+u));return u=a.length===0?"{}":G?`{
`+G+a.join(`,
`+G)+`
`+s+"}":"{"+a.join(",")+"}",G=s,u;default:}}ai.exports=function(e,t,n){var r;if(G="",Lt="",typeof n=="number")for(r=0;r<n;r+=1)Lt+=" ";else typeof n=="string"&&(Lt=n);if(he=t,t&&typeof t!="function"&&(typeof t!="object"||typeof t.length!="number"))throw new Error("JSON.stringify");return wt("",{"":e})}});var ui=h(en=>{"use strict";en.parse=oi();en.stringify=si()});var li=h((lc,ci)=>{"use strict";var as={}.toString;ci.exports=Array.isArray||function(e){return as.call(e)=="[object Array]"}});var tn=h((fc,di)=>{"use strict";var fi=Object.prototype.toString;di.exports=function(t){var n=fi.call(t),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&fi.call(t.callee)==="[object Function]"),r}});var Vi=h((dc,hi)=>{"use strict";var Ti;Object.keys||(nt=Object.prototype.hasOwnProperty,rn=Object.prototype.toString,pi=tn(),nn=Object.prototype.propertyIsEnumerable,mi=!nn.call({toString:null},"toString"),yi=nn.call(function(){},"prototype"),it=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ft=function(e){var t=e.constructor;return t&&t.prototype===e},Ni={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},vi=function(){if(typeof window>"u")return!1;for(var e in window)try{if(!Ni["$"+e]&&nt.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{Ft(window[e])}catch{return!0}}catch{return!0}return!1}(),gi=function(e){if(typeof window>"u"||!vi)return Ft(e);try{return Ft(e)}catch{return!1}},Ti=function(t){var n=t!==null&&typeof t=="object",r=rn.call(t)==="[object Function]",u=pi(t),o=n&&rn.call(t)==="[object String]",s=[];if(!n&&!r&&!u)throw new TypeError("Object.keys called on a non-object");var a=yi&&r;if(o&&t.length>0&&!nt.call(t,0))for(var i=0;i<t.length;++i)s.push(String(i));if(u&&t.length>0)for(var c=0;c<t.length;++c)s.push(String(c));else for(var d in t)!(a&&d==="prototype")&&nt.call(t,d)&&s.push(String(d));if(mi)for(var p=gi(t),l=0;l<it.length;++l)!(p&&it[l]==="constructor")&&nt.call(t,it[l])&&s.push(it[l]);return s});var nt,rn,pi,nn,mi,yi,it,Ft,Ni,vi,gi;hi.exports=Ti});var Ei=h((pc,Si)=>{"use strict";var ss=Array.prototype.slice,us=tn(),Ai=Object.keys,Mt=Ai?function(t){return Ai(t)}:Vi(),Oi=Object.keys;Mt.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(r){return us(r)?Oi(ss.call(r)):Oi(r)})}else Object.keys=Mt;return Object.keys||Mt};Si.exports=Mt});var _i=h((mc,bi)=>{"use strict";bi.exports=Object});var Di=h((yc,Ii)=>{"use strict";Ii.exports=Error});var Ri=h((Nc,ki)=>{"use strict";ki.exports=EvalError});var Ci=h((vc,Pi)=>{"use strict";Pi.exports=RangeError});var Li=h((gc,xi)=>{"use strict";xi.exports=ReferenceError});var on=h((Tc,wi)=>{"use strict";wi.exports=SyntaxError});var ot=h((hc,Fi)=>{"use strict";Fi.exports=TypeError});var ji=h((Vc,Mi)=>{"use strict";Mi.exports=URIError});var Ui=h((Ac,$i)=>{"use strict";$i.exports=Math.abs});var Bi=h((Oc,zi)=>{"use strict";zi.exports=Math.floor});var qi=h((Sc,Ki)=>{"use strict";Ki.exports=Math.max});var Hi=h((Ec,Gi)=>{"use strict";Gi.exports=Math.min});var Yi=h((bc,Wi)=>{"use strict";Wi.exports=Math.pow});var Zi=h((_c,Ji)=>{"use strict";Ji.exports=Object.getOwnPropertyDescriptor});var at=h((Ic,Xi)=>{"use strict";var jt=Zi();if(jt)try{jt([],"length")}catch{jt=null}Xi.exports=jt});var st=h((Dc,Qi)=>{"use strict";var $t=Object.defineProperty||!1;if($t)try{$t({},"a",{value:1})}catch{$t=!1}Qi.exports=$t});var to=h((kc,eo)=>{"use strict";eo.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var u=42;t[n]=u;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,n);if(a.value!==u||a.enumerable!==!0)return!1}return!0}});var io=h((Rc,no)=>{"use strict";var ro=typeof Symbol<"u"&&Symbol,cs=to();no.exports=function(){return typeof ro!="function"||typeof Symbol!="function"||typeof ro("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:cs()}});var so=h((Pc,ao)=>{"use strict";var ls="Function.prototype.bind called on incompatible ",fs=Object.prototype.toString,ds=Math.max,ps="[object Function]",oo=function(t,n){for(var r=[],u=0;u<t.length;u+=1)r[u]=t[u];for(var o=0;o<n.length;o+=1)r[o+t.length]=n[o];return r},ms=function(t,n){for(var r=[],u=n||0,o=0;u<t.length;u+=1,o+=1)r[o]=t[u];return r},ys=function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n};ao.exports=function(t){var n=this;if(typeof n!="function"||fs.apply(n)!==ps)throw new TypeError(ls+n);for(var r=ms(arguments,1),u,o=function(){if(this instanceof u){var d=n.apply(this,oo(r,arguments));return Object(d)===d?d:this}return n.apply(t,oo(r,arguments))},s=ds(0,n.length-r.length),a=[],i=0;i<s;i++)a[i]="$"+i;if(u=Function("binder","return function ("+ys(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var c=function(){};c.prototype=n.prototype,u.prototype=new c,c.prototype=null}return u}});var Ie=h((Cc,uo)=>{"use strict";var Ns=so();uo.exports=Function.prototype.bind||Ns});var Ut=h((xc,co)=>{"use strict";co.exports=Function.prototype.call});var zt=h((Lc,lo)=>{"use strict";lo.exports=Function.prototype.apply});var po=h((wc,fo)=>{"use strict";fo.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var an=h((Fc,mo)=>{"use strict";var vs=Ie(),gs=zt(),Ts=Ut(),hs=po();mo.exports=hs||vs.call(Ts,gs)});var Bt=h((Mc,yo)=>{"use strict";var Vs=Ie(),As=ot(),Os=Ut(),Ss=an();yo.exports=function(t){if(t.length<1||typeof t[0]!="function")throw new As("a function is required");return Ss(Vs,Os,t)}});var Vo=h((jc,ho)=>{"use strict";var Es=Bt(),No=at(),go;try{go=[].__proto__===Array.prototype}catch(e){if(!e||typeof e!="object"||!("code"in e)||e.code!=="ERR_PROTO_ACCESS")throw e}var sn=!!go&&No&&No(Object.prototype,"__proto__"),To=Object,vo=To.getPrototypeOf;ho.exports=sn&&typeof sn.get=="function"?Es([sn.get]):typeof vo=="function"?function(t){return vo(t==null?t:To(t))}:!1});var Oo=h(($c,Ao)=>{"use strict";var bs=Function.prototype.call,_s=Object.prototype.hasOwnProperty,Is=Ie();Ao.exports=Is.call(bs,_s)});var ln=h((Uc,ko)=>{"use strict";var O,_o=_i(),Ds=Di(),ks=Ri(),Rs=Ci(),Ps=Li(),Pe=on(),Re=ot(),Cs=ji(),xs=Ui(),Ls=Bi(),ws=qi(),Fs=Hi(),Ms=Yi(),Io=Function,un=function(e){try{return Io('"use strict"; return ('+e+").constructor;")()}catch{}},ut=at(),js=st(),cn=function(){throw new Re},$s=ut?function(){try{return arguments.callee,cn}catch{try{return ut(arguments,"callee").get}catch{return cn}}}():cn,De=io()(),Us=Vo(),L=typeof Reflect=="function"&&Reflect.getPrototypeOf||_o.getPrototypeOf||Us,Do=zt(),ct=Ut(),ke={},zs=typeof Uint8Array>"u"||!L?O:L(Uint8Array),Ve={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?O:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?O:ArrayBuffer,"%ArrayIteratorPrototype%":De&&L?L([][Symbol.iterator]()):O,"%AsyncFromSyncIteratorPrototype%":O,"%AsyncFunction%":ke,"%AsyncGenerator%":ke,"%AsyncGeneratorFunction%":ke,"%AsyncIteratorPrototype%":ke,"%Atomics%":typeof Atomics>"u"?O:Atomics,"%BigInt%":typeof BigInt>"u"?O:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?O:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?O:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?O:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Ds,"%eval%":eval,"%EvalError%":ks,"%Float32Array%":typeof Float32Array>"u"?O:Float32Array,"%Float64Array%":typeof Float64Array>"u"?O:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?O:FinalizationRegistry,"%Function%":Io,"%GeneratorFunction%":ke,"%Int8Array%":typeof Int8Array>"u"?O:Int8Array,"%Int16Array%":typeof Int16Array>"u"?O:Int16Array,"%Int32Array%":typeof Int32Array>"u"?O:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":De&&L?L(L([][Symbol.iterator]())):O,"%JSON%":typeof JSON=="object"?JSON:O,"%Map%":typeof Map>"u"?O:Map,"%MapIteratorPrototype%":typeof Map>"u"||!De||!L?O:L(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":_o,"%Object.getOwnPropertyDescriptor%":ut,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?O:Promise,"%Proxy%":typeof Proxy>"u"?O:Proxy,"%RangeError%":Rs,"%ReferenceError%":Ps,"%Reflect%":typeof Reflect>"u"?O:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?O:Set,"%SetIteratorPrototype%":typeof Set>"u"||!De||!L?O:L(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?O:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":De&&L?L(""[Symbol.iterator]()):O,"%Symbol%":De?Symbol:O,"%SyntaxError%":Pe,"%ThrowTypeError%":$s,"%TypedArray%":zs,"%TypeError%":Re,"%Uint8Array%":typeof Uint8Array>"u"?O:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?O:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?O:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?O:Uint32Array,"%URIError%":Cs,"%WeakMap%":typeof WeakMap>"u"?O:WeakMap,"%WeakRef%":typeof WeakRef>"u"?O:WeakRef,"%WeakSet%":typeof WeakSet>"u"?O:WeakSet,"%Function.prototype.call%":ct,"%Function.prototype.apply%":Do,"%Object.defineProperty%":js,"%Math.abs%":xs,"%Math.floor%":Ls,"%Math.max%":ws,"%Math.min%":Fs,"%Math.pow%":Ms};if(L)try{null.error}catch(e){So=L(L(e)),Ve["%Error.prototype%"]=So}var So,Bs=function e(t){var n;if(t==="%AsyncFunction%")n=un("async function () {}");else if(t==="%GeneratorFunction%")n=un("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=un("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var u=e("%AsyncGenerator%");u&&L&&(n=L(u.prototype))}return Ve[t]=n,n},Eo={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},lt=Ie(),Kt=Oo(),Ks=lt.call(ct,Array.prototype.concat),qs=lt.call(Do,Array.prototype.splice),bo=lt.call(ct,String.prototype.replace),qt=lt.call(ct,String.prototype.slice),Gs=lt.call(ct,RegExp.prototype.exec),Hs=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ws=/\\(\\)?/g,Ys=function(t){var n=qt(t,0,1),r=qt(t,-1);if(n==="%"&&r!=="%")throw new Pe("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Pe("invalid intrinsic syntax, expected opening `%`");var u=[];return bo(t,Hs,function(o,s,a,i){u[u.length]=a?bo(i,Ws,"$1"):s||o}),u},Js=function(t,n){var r=t,u;if(Kt(Eo,r)&&(u=Eo[r],r="%"+u[0]+"%"),Kt(Ve,r)){var o=Ve[r];if(o===ke&&(o=Bs(r)),typeof o>"u"&&!n)throw new Re("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:u,name:r,value:o}}throw new Pe("intrinsic "+t+" does not exist!")};ko.exports=function(t,n){if(typeof t!="string"||t.length===0)throw new Re("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Re('"allowMissing" argument must be a boolean');if(Gs(/^%?[^%]*%?$/,t)===null)throw new Pe("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=Ys(t),u=r.length>0?r[0]:"",o=Js("%"+u+"%",n),s=o.name,a=o.value,i=!1,c=o.alias;c&&(u=c[0],qs(r,Ks([0,1],c)));for(var d=1,p=!0;d<r.length;d+=1){var l=r[d],N=qt(l,0,1),y=qt(l,-1);if((N==='"'||N==="'"||N==="`"||y==='"'||y==="'"||y==="`")&&N!==y)throw new Pe("property names with quotes must have matching quotes");if((l==="constructor"||!p)&&(i=!0),u+="."+l,s="%"+u+"%",Kt(Ve,s))a=Ve[s];else if(a!=null){if(!(l in a)){if(!n)throw new Re("base intrinsic for "+t+" exists, but the property is not available.");return}if(ut&&d+1>=r.length){var A=ut(a,l);p=!!A,p&&"get"in A&&!("originalValue"in A.get)?a=A.get:a=a[l]}else p=Kt(a,l),a=a[l];p&&!i&&(Ve[s]=a)}}return a}});var xo=h((zc,Co)=>{"use strict";var Ro=st(),Zs=on(),Ce=ot(),Po=at();Co.exports=function(t,n,r){if(!t||typeof t!="object"&&typeof t!="function")throw new Ce("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new Ce("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ce("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ce("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ce("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ce("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,i=!!Po&&Po(t,n);if(Ro)Ro(t,n,{configurable:s===null&&i?i.configurable:!s,enumerable:u===null&&i?i.enumerable:!u,value:r,writable:o===null&&i?i.writable:!o});else if(a||!u&&!o&&!s)t[n]=r;else throw new Zs("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Fo=h((Bc,wo)=>{"use strict";var fn=st(),Lo=function(){return!!fn};Lo.hasArrayLengthDefineBug=function(){if(!fn)return null;try{return fn([],"length",{value:1}).length!==1}catch{return!0}};wo.exports=Lo});var zo=h((Kc,Uo)=>{"use strict";var Xs=ln(),Mo=xo(),Qs=Fo()(),jo=at(),$o=ot(),eu=Xs("%Math.floor%");Uo.exports=function(t,n){if(typeof t!="function")throw new $o("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||eu(n)!==n)throw new $o("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],u=!0,o=!0;if("length"in t&&jo){var s=jo(t,"length");s&&!s.configurable&&(u=!1),s&&!s.writable&&(o=!1)}return(u||o||!r)&&(Qs?Mo(t,"length",n,!0,!0):Mo(t,"length",n)),t}});var Ko=h((qc,Bo)=>{"use strict";var tu=Ie(),ru=zt(),nu=an();Bo.exports=function(){return nu(tu,ru,arguments)}});var Ho=h((Gc,Gt)=>{"use strict";var iu=zo(),qo=st(),ou=Bt(),Go=Ko();Gt.exports=function(t){var n=ou(arguments),r=t.length-(arguments.length-1);return iu(n,1+(r>0?r:0),!0)};qo?qo(Gt.exports,"apply",{value:Go}):Gt.exports.apply=Go});var Zo=h((Hc,Jo)=>{"use strict";var Wo=ln(),Yo=Bt(),au=Yo([Wo("%String.prototype.indexOf%")]);Jo.exports=function(t,n){var r=Wo(t,!!n);return typeof r=="function"&&au(t,".prototype.")>-1?Yo([r]):r}});var ra=h((Wc,ta)=>{"use strict";var Ht=(typeof JSON<"u"?JSON:ui()).stringify,su=li(),uu=Ei(),cu=Ho(),Wt=Zo(),Xo=Wt("Array.prototype.join"),Qo=Wt("Array.prototype.indexOf"),lu=Wt("Array.prototype.splice"),fu=Wt("Array.prototype.sort"),ea=function(t,n){for(var r="",u=0;u<t;u+=1)r+=n;return r},du=function(e,t,n){return n};ta.exports=function(t){var n=arguments.length>1?arguments[1]:void 0,r=n&&n.space||"";typeof r=="number"&&(r=ea(r," "));var u=!!n&&typeof n.cycles=="boolean"&&n.cycles,o=n&&n.replacer?cu(n.replacer):du,s=typeof n=="function"?n:n&&n.cmp,a=s&&function(c){var d=s.length>2&&function(l){return c[l]};return function(p,l){return s({key:p,value:c[p]},{key:l,value:c[l]},d?{__proto__:null,get:d}:void 0)}},i=[];return function c(d,p,l,N){var y=r?`
`+ea(N,r):"",A=r?": ":":";if(l&&l.toJSON&&typeof l.toJSON=="function"&&(l=l.toJSON()),l=o(d,p,l),l!==void 0){if(typeof l!="object"||l===null)return Ht(l);if(su(l)){for(var ie=[],_=0;_<l.length;_++){var H=c(l,_,l[_],N+1)||Ht(null);ie[ie.length]=y+r+H}return"["+Xo(ie,",")+y+"]"}if(Qo(i,l)!==-1){if(u)return Ht("__cycle__");throw new TypeError("Converting circular structure to JSON")}else i[i.length]=l;for(var Y=fu(uu(l),a&&a(l)),ie=[],_=0;_<Y.length;_++){var p=Y[_],pt=c(l,p,l[p],N+1);if(pt){var ye=Ht(p)+A+pt;ie[ie.length]=y+r+ye}}return lu(i,Qo(i,l),1),"{"+Xo(ie,",")+y+"}"}}({"":t},"",t,0)}});var Ju={};Aa(Ju,{CODAMA_ERROR__ANCHOR__ACCOUNT_TYPE_MISSING:()=>jn,CODAMA_ERROR__ANCHOR__ARGUMENT_TYPE_MISSING:()=>$n,CODAMA_ERROR__ANCHOR__PROGRAM_ID_KIND_UNIMPLEMENTED:()=>Bn,CODAMA_ERROR__ANCHOR__SEED_KIND_UNIMPLEMENTED:()=>zn,CODAMA_ERROR__ANCHOR__TYPE_PATH_MISSING:()=>Un,CODAMA_ERROR__ANCHOR__UNRECOGNIZED_IDL_TYPE:()=>Mn,CODAMA_ERROR__DISCRIMINATOR_FIELD_HAS_NO_DEFAULT_VALUE:()=>wn,CODAMA_ERROR__DISCRIMINATOR_FIELD_NOT_FOUND:()=>Ln,CODAMA_ERROR__ENUM_VARIANT_NOT_FOUND:()=>xn,CODAMA_ERROR__LINKED_NODE_NOT_FOUND:()=>vt,CODAMA_ERROR__NODE_FILESYSTEM_FUNCTION_UNAVAILABLE:()=>Rn,CODAMA_ERROR__RENDERERS__UNSUPPORTED_NODE:()=>Kn,CODAMA_ERROR__UNEXPECTED_NESTED_NODE_KIND:()=>Nt,CODAMA_ERROR__UNEXPECTED_NODE_KIND:()=>yt,CODAMA_ERROR__UNRECOGNIZED_BYTES_ENCODING:()=>Cn,CODAMA_ERROR__UNRECOGNIZED_NODE_KIND:()=>mt,CODAMA_ERROR__UNRECOGNIZED_NUMBER_FORMAT:()=>Pn,CODAMA_ERROR__VERSION_MISMATCH:()=>gt,CODAMA_ERROR__VISITORS__ACCOUNT_FIELD_NOT_FOUND:()=>Ot,CODAMA_ERROR__VISITORS__CANNOT_ADD_DUPLICATED_PDA_NAMES:()=>Tt,CODAMA_ERROR__VISITORS__CANNOT_EXTEND_MISSING_VISIT_FUNCTION:()=>Et,CODAMA_ERROR__VISITORS__CANNOT_FLATTEN_STRUCT_WITH_CONFLICTING_ATTRIBUTES:()=>Se,CODAMA_ERROR__VISITORS__CANNOT_REMOVE_LAST_PATH_IN_NODE_STACK:()=>_t,CODAMA_ERROR__VISITORS__CANNOT_USE_OPTIONAL_ACCOUNT_AS_PDA_SEED_VALUE:()=>At,CODAMA_ERROR__VISITORS__CYCLIC_DEPENDENCY_DETECTED_WHEN_RESOLVING_INSTRUCTION_DEFAULT_VALUES:()=>Vt,CODAMA_ERROR__VISITORS__FAILED_TO_VALIDATE_NODE:()=>bt,CODAMA_ERROR__VISITORS__INSTRUCTION_ENUM_ARGUMENT_NOT_FOUND:()=>Me,CODAMA_ERROR__VISITORS__INVALID_INSTRUCTION_DEFAULT_VALUE_DEPENDENCY:()=>Fe,CODAMA_ERROR__VISITORS__INVALID_NUMBER_WRAPPER:()=>St,CODAMA_ERROR__VISITORS__INVALID_PDA_SEED_VALUES:()=>ht,CODAMA_ERROR__VISITORS__RENDER_MAP_KEY_NOT_FOUND:()=>Fn,CONTEXTUAL_VALUE_NODES:()=>Yn,COUNT_NODES:()=>Ke,CodamaError:()=>V,DISCRIMINATOR_NODES:()=>pr,ENUM_VARIANT_TYPE_NODES:()=>Vr,INSTRUCTION_INPUT_VALUE_NODES:()=>ue,LINKABLE_NODES:()=>Nn,LINK_NODES:()=>wa,LOG_LEVELS:()=>fa,LinkableDictionary:()=>w,NodeStack:()=>$,PDA_SEED_NODES:()=>gr,REGISTERED_CONTEXTUAL_VALUE_NODE_KINDS:()=>Wn,REGISTERED_COUNT_NODE_KINDS:()=>cr,REGISTERED_DISCRIMINATOR_NODE_KINDS:()=>dr,REGISTERED_LINK_NODE_KINDS:()=>sr,REGISTERED_NODE_KINDS:()=>j,REGISTERED_PDA_SEED_NODE_KINDS:()=>vr,REGISTERED_TYPE_NODE_KINDS:()=>Pt,REGISTERED_VALUE_NODE_KINDS:()=>Hn,STANDALONE_CONTEXTUAL_VALUE_NODE_KINDS:()=>rr,STANDALONE_TYPE_NODE_KINDS:()=>Er,STANDALONE_VALUE_NODE_KINDS:()=>tr,TYPE_NODES:()=>I,VALUE_NODES:()=>C,accountBumpValueNode:()=>La,accountLinkNode:()=>Ue,accountNode:()=>Z,accountValueNode:()=>je,addPdasVisitor:()=>hu,amountTypeNode:()=>He,argumentValueNode:()=>$e,arrayTypeNode:()=>We,arrayValueNode:()=>wr,assertIsNestedTypeNode:()=>J,assertIsNode:()=>f,assertIsNodeFilter:()=>Qe,assertIsNodePath:()=>ia,booleanTypeNode:()=>hr,booleanValueNode:()=>Wa,bottomUpTransformerVisitor:()=>E,bytesTypeNode:()=>Ge,bytesValueNode:()=>yr,camelCase:()=>v,capitalize:()=>Gn,conditionalValueNode:()=>er,consoleLogVisitor:()=>yu,constantDiscriminatorNode:()=>fr,constantPdaSeedNode:()=>be,constantPdaSeedNodeFromBytes:()=>za,constantPdaSeedNodeFromProgramId:()=>$a,constantPdaSeedNodeFromString:()=>Ua,constantValueNode:()=>tt,constantValueNodeFromBytes:()=>Ja,constantValueNodeFromString:()=>Ya,createFromJson:()=>Yu,createFromRoot:()=>Dn,createSubInstructionsFromEnumArgsVisitor:()=>Au,dateTimeTypeNode:()=>Ye,deduplicateIdenticalDefinedTypesVisitor:()=>Ou,deduplicateInstructionDependencies:()=>mn,definedTypeLinkNode:()=>oe,definedTypeNode:()=>rt,deleteNodesVisitor:()=>hn,enumEmptyVariantTypeNode:()=>le,enumStructVariantTypeNode:()=>ge,enumTupleVariantTypeNode:()=>Je,enumTypeNode:()=>Ze,enumValueNode:()=>Fr,errorNode:()=>Gr,extendVisitor:()=>M,fieldDiscriminatorNode:()=>qe,fillDefaultPdaSeedValuesVisitor:()=>bn,findFirstNodeFromPath:()=>mu,findInstructionNodeFromPath:()=>dn,findLastNodeFromPath:()=>gn,findProgramNodeFromPath:()=>se,fixedCountNode:()=>Fa,fixedSizeTypeNode:()=>Xe,flattenInstructionArguments:()=>En,flattenInstructionDataArgumentsVisitor:()=>Vu,flattenStruct:()=>pa,flattenStructVisitor:()=>_u,getAllAccounts:()=>es,getAllDefinedTypes:()=>Wr,getAllErrors:()=>ts,getAllInstructionArguments:()=>Q,getAllInstructions:()=>Qn,getAllInstructionsWithSubs:()=>Qt,getAllPdas:()=>Qa,getAllPrograms:()=>X,getByteSizeVisitor:()=>Vn,getCommonInstructionAccountDefaultRules:()=>ku,getConjunctiveNodeSelectorFunction:()=>vn,getDebugStringVisitor:()=>Nu,getDefinedTypeHistogramVisitor:()=>_n,getInstructionDependencies:()=>Ae,getLastNodeFromPath:()=>R,getLevelIndex:()=>dt,getNodePathUntilLastNode:()=>pn,getNodeSelectorFunction:()=>Jt,getRecordLinkablesVisitor:()=>Xt,getResolvedInstructionInputsVisitor:()=>On,getUniqueHashStringVisitor:()=>Sn,getValidationItemsVisitor:()=>gu,getVisitFunctionName:()=>te,hiddenPrefixTypeNode:()=>Ar,hiddenSuffixTypeNode:()=>Or,identityValueNode:()=>nr,identityVisitor:()=>xe,instructionAccountLinkNode:()=>or,instructionAccountNode:()=>_e,instructionArgumentLinkNode:()=>ar,instructionArgumentNode:()=>x,instructionByteDeltaNode:()=>Hr,instructionLinkNode:()=>ze,instructionNode:()=>F,instructionRemainingAccountsNode:()=>Yr,interceptFirstVisitVisitor:()=>ca,interceptVisitor:()=>re,isCodamaError:()=>Ia,isDataEnum:()=>Ha,isDecimal:()=>Ga,isFilledNodePath:()=>Tn,isInteger:()=>qa,isNestedTypeNode:()=>Zn,isNode:()=>m,isNodeFilter:()=>br,isNodePath:()=>pe,isScalarEnum:()=>Rt,isSignedInteger:()=>Ba,isUnsignedInteger:()=>Ka,kebabCase:()=>Ca,logError:()=>Da,logInfo:()=>Ra,logWarn:()=>ka,mapEntryValueNode:()=>Mr,mapTypeNode:()=>Sr,mapValueNode:()=>jr,mapVisitor:()=>ft,mergeVisitor:()=>me,nodePathToString:()=>aa,nodePathToStringArray:()=>oa,nonNullableIdentityVisitor:()=>ne,noneValueNode:()=>Za,numberTypeNode:()=>ce,numberValueNode:()=>$r,optionTypeNode:()=>_r,parseDocs:()=>B,parseOptionalAccountStrategy:()=>ei,pascalCase:()=>Dt,payerValueNode:()=>ir,pdaLinkNode:()=>ve,pdaNode:()=>ee,pdaSeedValueNode:()=>Ee,pdaValueNode:()=>Be,pipe:()=>b,postOffsetTypeNode:()=>Ir,preOffsetTypeNode:()=>Dr,prefixedCountNode:()=>lr,programIdValueNode:()=>kt,programLinkNode:()=>Ne,programNode:()=>q,publicKeyTypeNode:()=>Jn,publicKeyValueNode:()=>P,recordLinkablesOnFirstVisitVisitor:()=>z,recordNodeStackVisitor:()=>U,remainderCountNode:()=>Ma,remainderOptionTypeNode:()=>kr,removeDocsVisitor:()=>ua,removeNullAndAssertIsNodeFilter:()=>D,resolveNestedTypeNode:()=>Te,resolverValueNode:()=>ur,rootNode:()=>Jr,rootNodeVisitor:()=>Oe,safeCaptureStackTrace:()=>Pa,sentinelTypeNode:()=>Rr,setAccountDiscriminatorFromFieldVisitor:()=>Iu,setFixedAccountSizesVisitor:()=>Du,setInstructionAccountDefaultValuesVisitor:()=>Ru,setInstructionDiscriminatorsVisitor:()=>Pu,setNumberWrappersVisitor:()=>Cu,setStructDefaultValuesVisitor:()=>xu,setTypeNode:()=>Pr,setValueNode:()=>Ur,singleNodeVisitor:()=>An,sizeDiscriminatorNode:()=>ja,sizePrefixTypeNode:()=>Cr,snakeCase:()=>xa,solAmountTypeNode:()=>et,someValueNode:()=>zr,staticVisitor:()=>Yt,stringTypeNode:()=>mr,stringValueNode:()=>Nr,structFieldTypeNode:()=>W,structFieldTypeNodeFromInstructionArgumentNode:()=>Xn,structFieldValueNode:()=>Br,structTypeNode:()=>K,structTypeNodeFromInstructionArgumentNodes:()=>Xa,structValueNode:()=>Kr,tapVisitor:()=>vu,throwValidatorItemsVisitor:()=>Tu,titleCase:()=>It,topDownTransformerVisitor:()=>Zt,transformDefinedTypesIntoAccountsVisitor:()=>Lu,transformNestedTypeNode:()=>fe,transformU8ArraysToBytesVisitor:()=>wu,tupleTypeNode:()=>xr,tupleValueNode:()=>qr,unwrapDefinedTypesVisitor:()=>In,unwrapInstructionArgsDefinedTypesVisitor:()=>Fu,unwrapTupleEnumWithSingleStructVisitor:()=>Mu,unwrapTypeDefinedLinksVisitor:()=>ju,updateAccountsVisitor:()=>zu,updateDefinedTypesVisitor:()=>Bu,updateErrorsVisitor:()=>Ku,updateInstructionsVisitor:()=>qu,updateProgramsVisitor:()=>Wu,validateCodamaVersion:()=>ya,validationItem:()=>k,variablePdaSeedNode:()=>Tr,visit:()=>g,visitOrElse:()=>pu,voidVisitor:()=>la,zeroableOptionTypeNode:()=>Lr});var mt=1,yt=2,Nt=3,vt=4,Rn=5,gt=6,Pn=7,Cn=8,xn=9,Ln=10,wn=11,Tt=12e5,ht=1200001,Vt=1200002,At=1200003,Fe=1200004,Ot=1200005,St=1200006,Et=1200007,bt=1200008,Me=1200009,Se=1200010,Fn=1200011,_t=1200012,Mn=21e5,jn=2100001,$n=2100002,Un=2100003,zn=2100004,Bn=2100005,Kn=28e5;function qn(e){return Array.isArray(e)?"%5B"+e.map(qn).join("%2C%20")+"%5D":typeof e=="bigint"?`${e}n`:encodeURIComponent(String(e!=null&&Object.getPrototypeOf(e)===null?{...e}:e))}function Ea([e,t]){return`${e}=${qn(t)}`}function ba(e){let t=Object.entries(e).map(Ea).join("&");return btoa(t)}var Qu={[jn]:"Account type [$name] is missing from the IDL types.",[$n]:"Argument name [$name] is missing from the instruction definition.",[Bn]:"Program ID kind [$kind] is not implemented.",[zn]:"Seed kind [$kind] is not implemented.",[Un]:"Field type is missing for path [$path] in [$idlType].",[Mn]:"Unrecognized Anchor IDL type [$idlType].",[wn]:"Discriminator field [$field] has no default value.",[Ln]:"Could not find discriminator field [$field]",[xn]:"Enum variant [$variant] not found in enum type [$enumName].",[vt]:"Could not find linked node [$name] from [$kind].",[Rn]:"Node.js filesystem function [$fsFunction] is not available in your environment.",[Kn]:"Cannot render the encountered node of kind [$kind].",[Nt]:"Expected nested node of kind [$expectedKinds], got [$kind]",[yt]:"Expected node of kind [$expectedKinds], got [$kind].",[Cn]:"Unrecognized bytes encoding [$encoding].",[mt]:"Unrecognized node kind [$kind].",[Pn]:"Unrecognized number format [$format].",[gt]:"The provided RootNode version [$rootVersion] is not compatible with the installed Codama version [$codamaVersion].",[Ot]:"Account [$name] does not have a field named [$missingField].",[Tt]:"Cannot add PDAs to program [$programName] because the following PDA names already exist [$duplicatedPdaNames].",[Et]:"Cannot extend visitor with function [$visitFunction] as the base visitor does not support it.",[Se]:"Cannot flatten struct since this would cause the following attributes to conflict [$conflictingAttributes].",[_t]:"Cannot remove the last path in the node stack.",[At]:"Cannot use optional account [$seedValueName] as the [$seedName] PDA seed for the [$instructionAccountName] account of the [$instructionName] instruction.",[Vt]:"Circular dependency detected when resolving the accounts and arguments' default values of the [$instructionName] instruction. Got the following dependency cycle [$formattedCycle].",[bt]:"Failed to validate the given node [$formattedHistogram].",[Me]:"Could not find an enum argument named [$argumentName] for instruction [$instructionName].",[Fe]:"Dependency [$dependencyName] of kind [$dependencyKind] is not a valid dependency of [$parentName] of kind [$parentKind] in the [$instructionName] instruction.",[St]:"Invalid number wrapper kind [$wrapper].",[ht]:"Invalid seed values for PDA [$pdaName] in instruction [$instructionName].",[Fn]:"Cannot find key [$key] in RenderMap."};function _a(e,t={}){{let n=`Codama error #${e}; Decode this error by running \`npx @codama/errors decode -- ${e}`;return Object.keys(t).length&&(n+=` '${ba(t)}'`),`${n}\``}}function Ia(e,t){return e instanceof Error&&e.name==="CodamaError"?t!==void 0?e.context.__code===t:!0:!1}var V=class extends Error{constructor(...[t,n]){let r,u;if(n){let{cause:s,...a}=n;s&&(u={cause:s}),Object.keys(a).length>0&&(r=a)}let o=_a(t,r);super(o,u);we(this,"context");this.context={__code:t,...r},this.name="CodamaError"}};function Da(e){console.error(e)}function ka(e){console.warn(e)}function Ra(e){console.log(e)}function Pa(...e){"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(...e)}function B(e){return e==null?[]:Array.isArray(e)?e:[e]}function Gn(e){return e.length===0?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function It(e){return e.replace(/([A-Z])/g," $1").split(/[^a-zA-Z0-9]+/).filter(t=>t.length>0).map(Gn).join(" ")}function Dt(e){return It(e).split(" ").join("")}function v(e){if(e.length===0)return e;let t=Dt(e);return t.charAt(0).toLowerCase()+t.slice(1)}function Ca(e){return It(e).split(" ").join("-").toLowerCase()}function xa(e){return It(e).split(" ").join("_").toLowerCase()}function La(e){return Object.freeze({kind:"accountBumpValueNode",name:v(e)})}function je(e){return Object.freeze({kind:"accountValueNode",name:v(e)})}function $e(e){return Object.freeze({kind:"argumentValueNode",name:v(e)})}function er(e){return Object.freeze({kind:"conditionalValueNode",condition:e.condition,...e.value!==void 0&&{value:e.value},...e.ifTrue!==void 0&&{ifTrue:e.ifTrue},...e.ifFalse!==void 0&&{ifFalse:e.ifFalse}})}var tr=["arrayValueNode","bytesValueNode","booleanValueNode","constantValueNode","enumValueNode","mapValueNode","noneValueNode","numberValueNode","setValueNode","someValueNode","structValueNode","tupleValueNode","publicKeyValueNode","stringValueNode"],Hn=[...tr,"mapEntryValueNode","structFieldValueNode"],C=tr,rr=["accountBumpValueNode","accountValueNode","argumentValueNode","conditionalValueNode","identityValueNode","payerValueNode","pdaValueNode","programIdValueNode","resolverValueNode"],Wn=[...rr,"pdaSeedValueNode"],Yn=rr,ue=[...C,...Yn,"programLinkNode"];function nr(){return Object.freeze({kind:"identityValueNode"})}function ir(){return Object.freeze({kind:"payerValueNode"})}function Ee(e,t){return Object.freeze({kind:"pdaSeedValueNode",name:v(e),value:t})}function Ne(e){return Object.freeze({kind:"programLinkNode",name:v(e)})}function Ue(e,t){return Object.freeze({kind:"accountLinkNode",...t===void 0?{}:{program:typeof t=="string"?Ne(t):t},name:v(e)})}function oe(e,t){return Object.freeze({kind:"definedTypeLinkNode",...t===void 0?{}:{program:typeof t=="string"?Ne(t):t},name:v(e)})}function ze(e,t){return Object.freeze({kind:"instructionLinkNode",...t===void 0?{}:{program:typeof t=="string"?Ne(t):t},name:v(e)})}function or(e,t){return Object.freeze({kind:"instructionAccountLinkNode",...t===void 0?{}:{instruction:typeof t=="string"?ze(t):t},name:v(e)})}function ar(e,t){return Object.freeze({kind:"instructionArgumentLinkNode",...t===void 0?{}:{instruction:typeof t=="string"?ze(t):t},name:v(e)})}var sr=["accountLinkNode","definedTypeLinkNode","instructionAccountLinkNode","instructionArgumentLinkNode","instructionLinkNode","pdaLinkNode","programLinkNode"],wa=sr;function ve(e,t){return Object.freeze({kind:"pdaLinkNode",...t===void 0?{}:{program:typeof t=="string"?Ne(t):t},name:v(e)})}function Be(e,t=[]){return Object.freeze({kind:"pdaValueNode",pda:typeof e=="string"?ve(e):e,seeds:t})}function kt(){return Object.freeze({kind:"programIdValueNode"})}function ur(e,t={}){return Object.freeze({kind:"resolverValueNode",name:v(e),docs:B(t.docs),dependsOn:t.dependsOn})}var cr=["fixedCountNode","remainderCountNode","prefixedCountNode"],Ke=cr;function Fa(e){return Object.freeze({kind:"fixedCountNode",value:e})}function lr(e){return Object.freeze({kind:"prefixedCountNode",prefix:e})}function Ma(){return Object.freeze({kind:"remainderCountNode"})}function fr(e,t=0){return Object.freeze({kind:"constantDiscriminatorNode",offset:t,constant:e})}var dr=["constantDiscriminatorNode","fieldDiscriminatorNode","sizeDiscriminatorNode"],pr=dr;function qe(e,t=0){return Object.freeze({kind:"fieldDiscriminatorNode",name:v(e),offset:t})}function ja(e){return Object.freeze({kind:"sizeDiscriminatorNode",size:e})}function Ge(){return Object.freeze({kind:"bytesTypeNode"})}function Jn(){return Object.freeze({kind:"publicKeyTypeNode"})}function mr(e){return Object.freeze({kind:"stringTypeNode",encoding:e})}function yr(e,t){return Object.freeze({kind:"bytesValueNode",data:t,encoding:e})}function Nr(e){return Object.freeze({kind:"stringValueNode",string:e})}function be(e,t){return Object.freeze({kind:"constantPdaSeedNode",type:e,value:t})}function $a(){return be(Jn(),kt())}function Ua(e,t){return be(mr(e),Nr(t))}function za(e,t){return be(Ge(),yr(e,t))}var vr=["constantPdaSeedNode","variablePdaSeedNode"],gr=vr;function Tr(e,t,n){return Object.freeze({kind:"variablePdaSeedNode",name:v(e),docs:B(n),type:t})}function He(e,t,n){return Object.freeze({kind:"amountTypeNode",decimals:t,...n!==void 0&&{unit:n},number:e})}function We(e,t){return Object.freeze({kind:"arrayTypeNode",item:e,count:t})}function ce(e,t="le"){return Object.freeze({kind:"numberTypeNode",format:e,endian:t})}function Ba(e){return e.format.startsWith("i")}function Ka(e){return e.format.startsWith("u")||e.format==="shortU16"}function qa(e){return!e.format.startsWith("f")}function Ga(e){return e.format.startsWith("f")}function hr(e){return Object.freeze({kind:"booleanTypeNode",size:e!=null?e:ce("u8")})}function Ye(e){return Object.freeze({kind:"dateTimeTypeNode",number:e})}function le(e,t){return Object.freeze({kind:"enumEmptyVariantTypeNode",name:v(e),discriminator:t})}function ge(e,t,n){return Object.freeze({kind:"enumStructVariantTypeNode",name:v(e),...n!==void 0&&{discriminator:n},struct:t})}function Je(e,t,n){return Object.freeze({kind:"enumTupleVariantTypeNode",name:v(e),...n!==void 0&&{discriminator:n},tuple:t})}function Ze(e,t={}){var n;return Object.freeze({kind:"enumTypeNode",variants:e,size:(n=t.size)!=null?n:ce("u8")})}function Rt(e){return e.variants.every(t=>t.kind==="enumEmptyVariantTypeNode")}function Ha(e){return!Rt(e)}var Vr=["enumEmptyVariantTypeNode","enumStructVariantTypeNode","enumTupleVariantTypeNode"];function Xe(e,t){return Object.freeze({kind:"fixedSizeTypeNode",size:t,type:e})}function Ar(e,t){return Object.freeze({kind:"hiddenPrefixTypeNode",type:e,prefix:t})}function Or(e,t){return Object.freeze({kind:"hiddenSuffixTypeNode",type:e,suffix:t})}function Sr(e,t,n){return Object.freeze({kind:"mapTypeNode",key:e,value:t,count:n})}var Er=["amountTypeNode","arrayTypeNode","booleanTypeNode","bytesTypeNode","dateTimeTypeNode","enumTypeNode","fixedSizeTypeNode","hiddenPrefixTypeNode","hiddenSuffixTypeNode","mapTypeNode","numberTypeNode","optionTypeNode","postOffsetTypeNode","preOffsetTypeNode","publicKeyTypeNode","remainderOptionTypeNode","sentinelTypeNode","setTypeNode","sizePrefixTypeNode","solAmountTypeNode","stringTypeNode","structTypeNode","tupleTypeNode","zeroableOptionTypeNode"],Pt=[...Er,"structFieldTypeNode","enumEmptyVariantTypeNode","enumStructVariantTypeNode","enumTupleVariantTypeNode"],I=[...Er,"definedTypeLinkNode"],j=[...Wn,...dr,...sr,...vr,...cr,...Pt,...Hn,"rootNode","programNode","pdaNode","accountNode","instructionAccountNode","instructionArgumentNode","instructionByteDeltaNode","instructionNode","instructionRemainingAccountsNode","errorNode","definedTypeNode"];function m(e,t){let n=Array.isArray(t)?t:[t];return!!e&&n.includes(e.kind)}function f(e,t){var r;let n=Array.isArray(t)?t:[t];if(!m(e,n))throw new V(yt,{expectedKinds:n,kind:(r=e==null?void 0:e.kind)!=null?r:null,node:e})}function br(e){return t=>m(t,e)}function Qe(e){return t=>(f(t,e),!0)}function D(e){return t=>(t&&f(t,e),t!=null)}function Te(e){switch(e.kind){case"fixedSizeTypeNode":case"hiddenPrefixTypeNode":case"hiddenSuffixTypeNode":case"postOffsetTypeNode":case"preOffsetTypeNode":case"sentinelTypeNode":case"sizePrefixTypeNode":return Te(e.type);default:return e}}function fe(e,t){switch(e.kind){case"fixedSizeTypeNode":case"hiddenPrefixTypeNode":case"hiddenSuffixTypeNode":case"postOffsetTypeNode":case"preOffsetTypeNode":case"sentinelTypeNode":case"sizePrefixTypeNode":return Object.freeze({...e,type:fe(e.type,t)});default:return t(e)}}function Zn(e,t){if(!m(e,I))return!1;let n=Array.isArray(t)?t:[t],r=Te(e);return!!e&&n.includes(r.kind)}function J(e,t){var r;let n=Array.isArray(t)?t:[t];if(!Zn(e,n))throw new V(Nt,{expectedKinds:n,kind:(r=e==null?void 0:e.kind)!=null?r:null,node:e})}function _r(e,t={}){var n,r;return Object.freeze({kind:"optionTypeNode",fixed:(n=t.fixed)!=null?n:!1,item:e,prefix:(r=t.prefix)!=null?r:ce("u8")})}function Ir(e,t,n){return Object.freeze({kind:"postOffsetTypeNode",offset:t,strategy:n!=null?n:"relative",type:e})}function Dr(e,t,n){return Object.freeze({kind:"preOffsetTypeNode",offset:t,strategy:n!=null?n:"relative",type:e})}function kr(e){return Object.freeze({kind:"remainderOptionTypeNode",item:e})}function Rr(e,t){return Object.freeze({kind:"sentinelTypeNode",type:e,sentinel:t})}function Pr(e,t){return Object.freeze({kind:"setTypeNode",item:e,count:t})}function Cr(e,t){return Object.freeze({kind:"sizePrefixTypeNode",type:e,prefix:t})}function et(e){return Object.freeze({kind:"solAmountTypeNode",number:e})}function W(e){return Object.freeze({kind:"structFieldTypeNode",name:v(e.name),...e.defaultValueStrategy!==void 0&&{defaultValueStrategy:e.defaultValueStrategy},docs:B(e.docs),type:e.type,...e.defaultValue!==void 0&&{defaultValue:e.defaultValue}})}function K(e){return Object.freeze({kind:"structTypeNode",fields:e})}function xr(e){return Object.freeze({kind:"tupleTypeNode",items:e})}function Lr(e,t){return Object.freeze({kind:"zeroableOptionTypeNode",item:e,...t!==void 0&&{zeroValue:t}})}function wr(e){return Object.freeze({kind:"arrayValueNode",items:e})}function Wa(e){return Object.freeze({kind:"booleanValueNode",boolean:e})}function tt(e,t){return Object.freeze({kind:"constantValueNode",type:e,value:t})}function Ya(e,t){return tt(mr(e),Nr(t))}function Ja(e,t){return tt(Ge(),yr(e,t))}function Fr(e,t,n){return Object.freeze({kind:"enumValueNode",variant:v(t),enum:typeof e=="string"?oe(e):e,...n!==void 0&&{value:n}})}function Mr(e,t){return Object.freeze({kind:"mapEntryValueNode",key:e,value:t})}function jr(e){return Object.freeze({kind:"mapValueNode",entries:e})}function Za(){return Object.freeze({kind:"noneValueNode"})}function $r(e){return Object.freeze({kind:"numberValueNode",number:e})}function P(e,t){return Object.freeze({kind:"publicKeyValueNode",publicKey:e,...t!==void 0&&{identifier:v(t)}})}function Ur(e){return Object.freeze({kind:"setValueNode",items:e})}function zr(e){return Object.freeze({kind:"someValueNode",value:e})}function Br(e,t){return Object.freeze({kind:"structFieldValueNode",name:v(e),value:t})}function Kr(e){return Object.freeze({kind:"structValueNode",fields:e})}function qr(e){return Object.freeze({kind:"tupleValueNode",items:e})}function Z(e){var t;return Object.freeze({kind:"accountNode",name:v(e.name),...e.size===void 0?{}:{size:e.size},docs:B(e.docs),data:(t=e.data)!=null?t:K([]),...e.pda!==void 0&&{pda:e.pda},...e.discriminators!==void 0&&{discriminators:e.discriminators}})}function rt(e){return Object.freeze({kind:"definedTypeNode",name:v(e.name),docs:B(e.docs),type:e.type})}function Gr(e){return Object.freeze({kind:"errorNode",name:v(e.name),code:e.code,message:e.message,docs:B(e.docs)})}function _e(e){var t;return Object.freeze({kind:"instructionAccountNode",name:v(e.name),isWritable:e.isWritable,isSigner:e.isSigner,isOptional:(t=e.isOptional)!=null?t:!1,docs:B(e.docs),...e.defaultValue!==void 0&&{defaultValue:e.defaultValue}})}function x(e){return Object.freeze({kind:"instructionArgumentNode",name:v(e.name),...e.defaultValueStrategy!==void 0&&{defaultValueStrategy:e.defaultValueStrategy},docs:B(e.docs),type:e.type,...e.defaultValue!==void 0&&{defaultValue:e.defaultValue}})}function Xa(e){return K(e.map(Xn))}function Xn(e){return m(e.defaultValue,C)?W({...e,defaultValue:e.defaultValue}):W({...e,defaultValue:void 0,defaultValueStrategy:void 0})}function Hr(e,t={}){var n;return Object.freeze({kind:"instructionByteDeltaNode",withHeader:(n=t.withHeader)!=null?n:!m(e,"resolverValueNode"),...t.subtract!==void 0&&{subtract:t.subtract},value:e})}function q(e){var t,n,r,u,o,s;return Object.freeze({kind:"programNode",name:v(e.name),publicKey:e.publicKey,version:(t=e.version)!=null?t:"0.0.0",...e.origin!==void 0&&{origin:e.origin},docs:B(e.docs),accounts:(n=e.accounts)!=null?n:[],instructions:(r=e.instructions)!=null?r:[],definedTypes:(u=e.definedTypes)!=null?u:[],pdas:(o=e.pdas)!=null?o:[],errors:(s=e.errors)!=null?s:[]})}function X(e){return Array.isArray(e)?e:e.kind==="programNode"?[e]:[e.program,...e.additionalPrograms]}function Qa(e){return X(e).flatMap(t=>t.pdas)}function es(e){return X(e).flatMap(t=>t.accounts)}function Wr(e){return X(e).flatMap(t=>t.definedTypes)}function Qn(e){return X(e).flatMap(t=>t.instructions)}function ts(e){return X(e).flatMap(t=>t.errors)}function F(e){var t,n;return Object.freeze({kind:"instructionNode",name:v(e.name),docs:B(e.docs),optionalAccountStrategy:ei(e.optionalAccountStrategy),accounts:(t=e.accounts)!=null?t:[],arguments:(n=e.arguments)!=null?n:[],extraArguments:e.extraArguments,remainingAccounts:e.remainingAccounts,byteDeltas:e.byteDeltas,discriminators:e.discriminators,subInstructions:e.subInstructions})}function ei(e){return e!=null?e:"programId"}function Q(e){var t;return[...e.arguments,...(t=e.extraArguments)!=null?t:[]]}function Qt(e,t={}){let{leavesOnly:n=!1,subInstructionsFirst:r=!1}=t;if(m(e,"instructionNode")){if(!e.subInstructions||e.subInstructions.length===0)return[e];let o=e.subInstructions.flatMap(s=>Qt(s,t));return n?o:r?[...o,e]:[e,...o]}return(m(e,"programNode")?e.instructions:Qn(e)).flatMap(o=>Qt(o,t))}function Yr(e,t={}){return Object.freeze({kind:"instructionRemainingAccountsNode",...t.isOptional!==void 0&&{isOptional:t.isOptional},...t.isSigner!==void 0&&{isSigner:t.isSigner},...t.isWritable!==void 0&&{isWritable:t.isWritable},docs:B(t.docs),value:e})}function ee(e){return Object.freeze({kind:"pdaNode",name:v(e.name),docs:B(e.docs),...e.programId&&{programId:e.programId},seeds:e.seeds})}function Jr(e,t){return Object.freeze({kind:"rootNode",standard:"codama",version:"1.2.11",program:e,additionalPrograms:t!=null?t:[]})}var yn=Oa(ra(),1);function g(e,t){let n=te(e.kind);return t[n](e)}function pu(e,t,n){let r=te(e.kind);return(r in t?t[r]:n)(e)}function te(e){if(!j.includes(e))throw new V(mt,{kind:e});return`visit${Dt(e.slice(0,-4))}`}function Yt(e,t={}){var u;let n=(u=t.keys)!=null?u:j,r={};return n.forEach(o=>{r[te(o)]=e.bind(r)}),r}function xe(e={}){var u;let t=(u=e.keys)!=null?u:j,n=Yt(o=>Object.freeze({...o}),{keys:t}),r=o=>s=>t.includes(s.kind)?g(s,o):Object.freeze({...s});return t.includes("rootNode")&&(n.visitRoot=function(s){let a=r(this)(s.program);return a===null?null:(f(a,"programNode"),Jr(a,s.additionalPrograms.map(r(this)).filter(D("programNode"))))}),t.includes("programNode")&&(n.visitProgram=function(s){return q({...s,accounts:s.accounts.map(r(this)).filter(D("accountNode")),definedTypes:s.definedTypes.map(r(this)).filter(D("definedTypeNode")),errors:s.errors.map(r(this)).filter(D("errorNode")),instructions:s.instructions.map(r(this)).filter(D("instructionNode")),pdas:s.pdas.map(r(this)).filter(D("pdaNode"))})}),t.includes("pdaNode")&&(n.visitPda=function(s){return ee({...s,seeds:s.seeds.map(r(this)).filter(D(gr))})}),t.includes("accountNode")&&(n.visitAccount=function(s){var c;let a=r(this)(s.data);if(a===null)return null;f(a,"structTypeNode");let i=s.pda&&(c=r(this)(s.pda))!=null?c:void 0;return i&&f(i,"pdaLinkNode"),Z({...s,data:a,pda:i})}),t.includes("instructionNode")&&(n.visitInstruction=function(s){return F({...s,accounts:s.accounts.map(r(this)).filter(D("instructionAccountNode")),arguments:s.arguments.map(r(this)).filter(D("instructionArgumentNode")),byteDeltas:s.byteDeltas?s.byteDeltas.map(r(this)).filter(D("instructionByteDeltaNode")):void 0,discriminators:s.discriminators?s.discriminators.map(r(this)).filter(D(pr)):void 0,extraArguments:s.extraArguments?s.extraArguments.map(r(this)).filter(D("instructionArgumentNode")):void 0,remainingAccounts:s.remainingAccounts?s.remainingAccounts.map(r(this)).filter(D("instructionRemainingAccountsNode")):void 0,subInstructions:s.subInstructions?s.subInstructions.map(r(this)).filter(D("instructionNode")):void 0})}),t.includes("instructionAccountNode")&&(n.visitInstructionAccount=function(s){var i;let a=s.defaultValue&&(i=r(this)(s.defaultValue))!=null?i:void 0;return a&&f(a,ue),_e({...s,defaultValue:a})}),t.includes("instructionArgumentNode")&&(n.visitInstructionArgument=function(s){var c;let a=r(this)(s.type);if(a===null)return null;f(a,I);let i=s.defaultValue&&(c=r(this)(s.defaultValue))!=null?c:void 0;return i&&f(i,ue),x({...s,defaultValue:i,type:a})}),t.includes("instructionRemainingAccountsNode")&&(n.visitInstructionRemainingAccounts=function(s){let a=r(this)(s.value);return a===null?null:(f(a,["argumentValueNode","resolverValueNode"]),Yr(a,{...s}))}),t.includes("instructionByteDeltaNode")&&(n.visitInstructionByteDelta=function(s){let a=r(this)(s.value);return a===null?null:(f(a,["numberValueNode","accountLinkNode","argumentValueNode","resolverValueNode"]),Hr(a,{...s}))}),t.includes("definedTypeNode")&&(n.visitDefinedType=function(s){let a=r(this)(s.type);return a===null?null:(f(a,I),rt({...s,type:a}))}),t.includes("arrayTypeNode")&&(n.visitArrayType=function(s){let a=r(this)(s.count);if(a===null)return null;f(a,Ke);let i=r(this)(s.item);return i===null?null:(f(i,I),We(i,a))}),t.includes("enumTypeNode")&&(n.visitEnumType=function(s){return Ze(s.variants.map(r(this)).filter(D(Vr)),{size:s.size})}),t.includes("enumStructVariantTypeNode")&&(n.visitEnumStructVariantType=function(s){let a=r(this)(s.struct);return a?(f(a,"structTypeNode"),a.fields.length===0?le(s.name):ge(s.name,a)):le(s.name)}),t.includes("enumTupleVariantTypeNode")&&(n.visitEnumTupleVariantType=function(s){let a=r(this)(s.tuple);return a?(f(a,"tupleTypeNode"),a.items.length===0?le(s.name):Je(s.name,a)):le(s.name)}),t.includes("mapTypeNode")&&(n.visitMapType=function(s){let a=r(this)(s.count);if(a===null)return null;f(a,Ke);let i=r(this)(s.key);if(i===null)return null;f(i,I);let c=r(this)(s.value);return c===null?null:(f(c,I),Sr(i,c,a))}),t.includes("optionTypeNode")&&(n.visitOptionType=function(s){let a=r(this)(s.prefix);if(a===null)return null;J(a,"numberTypeNode");let i=r(this)(s.item);return i===null?null:(f(i,I),_r(i,{...s,prefix:a}))}),t.includes("zeroableOptionTypeNode")&&(n.visitZeroableOptionType=function(s){var c;let a=r(this)(s.item);if(a===null)return null;f(a,I);let i=s.zeroValue&&(c=r(this)(s.zeroValue))!=null?c:void 0;return i&&f(i,"constantValueNode"),Lr(a,i)}),t.includes("remainderOptionTypeNode")&&(n.visitRemainderOptionType=function(s){let a=r(this)(s.item);return a===null?null:(f(a,I),kr(a))}),t.includes("booleanTypeNode")&&(n.visitBooleanType=function(s){let a=r(this)(s.size);return a===null?null:(J(a,"numberTypeNode"),hr(a))}),t.includes("setTypeNode")&&(n.visitSetType=function(s){let a=r(this)(s.count);if(a===null)return null;f(a,Ke);let i=r(this)(s.item);return i===null?null:(f(i,I),Pr(i,a))}),t.includes("structTypeNode")&&(n.visitStructType=function(s){let a=s.fields.map(r(this)).filter(D("structFieldTypeNode"));return K(a)}),t.includes("structFieldTypeNode")&&(n.visitStructFieldType=function(s){var c;let a=r(this)(s.type);if(a===null)return null;f(a,I);let i=s.defaultValue&&(c=r(this)(s.defaultValue))!=null?c:void 0;return i&&f(i,C),W({...s,defaultValue:i,type:a})}),t.includes("tupleTypeNode")&&(n.visitTupleType=function(s){let a=s.items.map(r(this)).filter(D(I));return xr(a)}),t.includes("amountTypeNode")&&(n.visitAmountType=function(s){let a=r(this)(s.number);return a===null?null:(J(a,"numberTypeNode"),He(a,s.decimals,s.unit))}),t.includes("dateTimeTypeNode")&&(n.visitDateTimeType=function(s){let a=r(this)(s.number);return a===null?null:(J(a,"numberTypeNode"),Ye(a))}),t.includes("solAmountTypeNode")&&(n.visitSolAmountType=function(s){let a=r(this)(s.number);return a===null?null:(J(a,"numberTypeNode"),et(a))}),t.includes("prefixedCountNode")&&(n.visitPrefixedCount=function(s){let a=r(this)(s.prefix);return a===null?null:(J(a,"numberTypeNode"),lr(a))}),t.includes("arrayValueNode")&&(n.visitArrayValue=function(s){return wr(s.items.map(r(this)).filter(D(C)))}),t.includes("constantValueNode")&&(n.visitConstantValue=function(s){let a=r(this)(s.type);if(a===null)return null;f(a,I);let i=r(this)(s.value);return i===null?null:(f(i,C),tt(a,i))}),t.includes("enumValueNode")&&(n.visitEnumValue=function(s){var c;let a=r(this)(s.enum);if(a===null)return null;f(a,["definedTypeLinkNode"]);let i=s.value&&(c=r(this)(s.value))!=null?c:void 0;return i&&f(i,["structValueNode","tupleValueNode"]),Fr(a,s.variant,i)}),t.includes("mapValueNode")&&(n.visitMapValue=function(s){return jr(s.entries.map(r(this)).filter(D("mapEntryValueNode")))}),t.includes("mapEntryValueNode")&&(n.visitMapEntryValue=function(s){let a=r(this)(s.key);if(a===null)return null;f(a,C);let i=r(this)(s.value);return i===null?null:(f(i,C),Mr(a,i))}),t.includes("setValueNode")&&(n.visitSetValue=function(s){return Ur(s.items.map(r(this)).filter(D(C)))}),t.includes("someValueNode")&&(n.visitSomeValue=function(s){let a=r(this)(s.value);return a===null?null:(f(a,C),zr(a))}),t.includes("structValueNode")&&(n.visitStructValue=function(s){return Kr(s.fields.map(r(this)).filter(D("structFieldValueNode")))}),t.includes("structFieldValueNode")&&(n.visitStructFieldValue=function(s){let a=r(this)(s.value);return a===null?null:(f(a,C),Br(s.name,a))}),t.includes("tupleValueNode")&&(n.visitTupleValue=function(s){return qr(s.items.map(r(this)).filter(D(C)))}),t.includes("constantPdaSeedNode")&&(n.visitConstantPdaSeed=function(s){let a=r(this)(s.type);if(a===null)return null;f(a,I);let i=r(this)(s.value);return i===null?null:(f(i,[...C,"programIdValueNode"]),be(a,i))}),t.includes("variablePdaSeedNode")&&(n.visitVariablePdaSeed=function(s){let a=r(this)(s.type);return a===null?null:(f(a,I),Tr(s.name,a,s.docs))}),t.includes("resolverValueNode")&&(n.visitResolverValue=function(s){var i;let a=((i=s.dependsOn)!=null?i:[]).map(r(this)).filter(D(["accountValueNode","argumentValueNode"]));return ur(s.name,{...s,dependsOn:a.length===0?void 0:a})}),t.includes("conditionalValueNode")&&(n.visitConditionalValue=function(s){var p,l,N;let a=r(this)(s.condition);if(a===null)return null;f(a,["resolverValueNode","accountValueNode","argumentValueNode"]);let i=s.value&&(p=r(this)(s.value))!=null?p:void 0;i&&f(i,C);let c=s.ifTrue&&(l=r(this)(s.ifTrue))!=null?l:void 0;c&&f(c,ue);let d=s.ifFalse&&(N=r(this)(s.ifFalse))!=null?N:void 0;return d&&f(d,ue),!c&&!d?null:er({condition:a,ifFalse:d,ifTrue:c,value:i})}),t.includes("pdaValueNode")&&(n.visitPdaValue=function(s){let a=r(this)(s.pda);if(a===null)return null;f(a,["pdaLinkNode","pdaNode"]);let i=s.seeds.map(r(this)).filter(D("pdaSeedValueNode"));return Be(a,i)}),t.includes("pdaSeedValueNode")&&(n.visitPdaSeedValue=function(s){let a=r(this)(s.value);return a===null?null:(f(a,[...C,"accountValueNode","argumentValueNode"]),Ee(s.name,a))}),t.includes("fixedSizeTypeNode")&&(n.visitFixedSizeType=function(s){let a=r(this)(s.type);return a===null?null:(f(a,I),Xe(a,s.size))}),t.includes("sizePrefixTypeNode")&&(n.visitSizePrefixType=function(s){let a=r(this)(s.prefix);if(a===null)return null;J(a,"numberTypeNode");let i=r(this)(s.type);return i===null?null:(f(i,I),Cr(i,a))}),t.includes("preOffsetTypeNode")&&(n.visitPreOffsetType=function(s){let a=r(this)(s.type);return a===null?null:(f(a,I),Dr(a,s.offset,s.strategy))}),t.includes("postOffsetTypeNode")&&(n.visitPostOffsetType=function(s){let a=r(this)(s.type);return a===null?null:(f(a,I),Ir(a,s.offset,s.strategy))}),t.includes("sentinelTypeNode")&&(n.visitSentinelType=function(s){let a=r(this)(s.sentinel);if(a===null)return null;f(a,"constantValueNode");let i=r(this)(s.type);return i===null?null:(f(i,I),Rr(i,a))}),t.includes("hiddenPrefixTypeNode")&&(n.visitHiddenPrefixType=function(s){let a=r(this)(s.type);if(a===null)return null;f(a,I);let i=s.prefix.map(r(this)).filter(D("constantValueNode"));return i.length===0?a:Ar(a,i)}),t.includes("hiddenSuffixTypeNode")&&(n.visitHiddenSuffixType=function(s){let a=r(this)(s.type);if(a===null)return null;f(a,I);let i=s.suffix.map(r(this)).filter(D("constantValueNode"));return i.length===0?a:Or(a,i)}),t.includes("constantDiscriminatorNode")&&(n.visitConstantDiscriminator=function(s){let a=r(this)(s.constant);return a===null?null:(f(a,"constantValueNode"),fr(a,s.offset))}),t.includes("accountLinkNode")&&(n.visitAccountLink=function(s){var i;let a=s.program&&(i=r(this)(s.program))!=null?i:void 0;return a&&f(a,"programLinkNode"),Ue(s.name,a)}),t.includes("definedTypeLinkNode")&&(n.visitDefinedTypeLink=function(s){var i;let a=s.program&&(i=r(this)(s.program))!=null?i:void 0;return a&&f(a,"programLinkNode"),oe(s.name,a)}),t.includes("instructionLinkNode")&&(n.visitInstructionLink=function(s){var i;let a=s.program&&(i=r(this)(s.program))!=null?i:void 0;return a&&f(a,"programLinkNode"),ze(s.name,a)}),t.includes("instructionAccountLinkNode")&&(n.visitInstructionAccountLink=function(s){var i;let a=s.instruction&&(i=r(this)(s.instruction))!=null?i:void 0;return a&&f(a,"instructionLinkNode"),or(s.name,a)}),t.includes("instructionArgumentLinkNode")&&(n.visitInstructionArgumentLink=function(s){var i;let a=s.instruction&&(i=r(this)(s.instruction))!=null?i:void 0;return a&&f(a,"instructionLinkNode"),ar(s.name,a)}),t.includes("pdaLinkNode")&&(n.visitPdaLink=function(s){var i;let a=s.program&&(i=r(this)(s.program))!=null?i:void 0;return a&&f(a,"programLinkNode"),ve(s.name,a)}),n}function re(e,t){let n=j.map(te);return Object.fromEntries(Object.keys(e).flatMap(r=>{let u=r;return n.includes(u)?[[u,function(s){let a=e[u];return t(s,a.bind(this))}]]:[]}))}var Jt=e=>{if(typeof e=="function")return e;let t=(o,s)=>{if(s==="*")return!0;let a=s.match(/^(?:\[([^\]]+)\])?(.*)?$/);if(!a)return!1;let[,i,c]=a,d=i?i.split("|").map(v):[];return!(d.length>0&&!d.includes(o.kind)||c&&(!("name"in o)||v(c)!==o.name))},n=(o,s)=>{if(s.length===0)return!0;if(o.length===0)return!1;let a=o.pop(),i=s.pop();return t(a,i)?n(o,s):n(o,[...s,i])},r=(o,s)=>{if(s.length===0||o.length===0)return!1;let a=o.pop(),i=s.pop();return t(a,i)&&n(o,s)},u=e.split(".");return o=>r([...o],[...u])},vn=e=>{let n=(Array.isArray(e)?e:[e]).map(Jt);return r=>n.every(u=>u(r))};function R(e){return e[e.length-1]}function mu(e,t){return e.find(n=>m(n,t))}function gn(e,t){for(let n=e.length-1;n>=0;n--){let r=e[n];if(m(r,t))return r}}function se(e){return gn(e,"programNode")}function dn(e){return gn(e,"instructionNode")}function pn(e,t){let n=(()=>{for(let r=e.length-1;r>=0;r--){let u=e[r];if(m(u,t))return r}return-1})();if(n!==-1)return e.slice(0,n+1)}function Tn(e){return!!e&&e.length>0}function pe(e,t){return m(Tn(e)?R(e):null,t)}function ia(e,t){f(Tn(e)?R(e):null,t)}function oa(e){return e.map(t=>"name"in t?`[${t.kind}]${t.name}`:`[${t.kind}]`)}function aa(e){return oa(e).join(" > ")}var $=class sa{constructor(...t){we(this,"stack");this.stack=t.length===0?[[]]:[...t.map(n=>[...n])]}get currentPath(){return this.stack[this.stack.length-1]}push(t){this.currentPath.push(t)}pop(){return this.currentPath.pop()}peek(){return this.isEmpty()?void 0:this.currentPath[this.currentPath.length-1]}pushPath(t=[]){this.stack.push([...t])}popPath(){if(this.stack.length<=1)throw new V(_t,{path:[...this.stack[this.stack.length-1]]});return[...this.stack.pop()]}getPath(t){let n=[...this.currentPath];return t&&ia(n,t),n}isEmpty(){return this.currentPath.length===0}clone(){return new sa(...this.stack)}toString(){return aa(this.getPath())}};function b(e,...t){return t.reduce((n,r)=>r(n),e)}function U(e,t){return re(e,(n,r)=>{t.push(n);let u=r(n);return t.pop(),u})}function E(e,t={}){var u;let n=e.map(o=>typeof o=="function"?o:(s,a)=>vn(o.select)(a.getPath())?o.transform(s,a):s),r=(u=t.stack)!=null?u:new $;return b(xe(t),o=>re(o,(s,a)=>n.reduce((i,c)=>i===null?null:c(i,r),a(s))),o=>U(o,r))}function ft(e,t){let n=j.map(te);return Object.fromEntries(Object.keys(e).flatMap(r=>{let u=r;return n.includes(u)?[[u,o=>t(e[u](o))]]:[]}))}function yu(e){return ft(e,t=>console.log(t))}function Zt(e,t={}){var u;let n=e.map(o=>typeof o=="function"?o:(s,a)=>vn(o.select)(a.getPath())?o.transform(s,a):s),r=(u=t.stack)!=null?u:new $;return b(xe(t),o=>re(o,(s,a)=>{let i=n.reduce((c,d)=>c===null?null:d(c,r),s);return i===null?null:a(i)}),o=>U(o,r))}function hn(e,t){return Zt(e.map(n=>({select:n,transform:()=>null})),t)}function M(e,t){let n=j.map(te),r=Object.fromEntries(Object.keys(t).flatMap(u=>{if(!n.includes(u))return[];let o=u;if(!e[o])throw new V(Et,{visitFunction:o});return[[o,function(a){let i=t[o],c=e[o];return i.bind(this)(a,{next:c.bind(this),self:this})}]]}));return{...e,...r}}function me(e,t,n={}){var s;let r=(s=n.keys)!=null?s:j,u=Yt(e,{keys:r}),o=a=>i=>r.includes(i.kind)?[g(i,a)]:[];return r.includes("rootNode")&&(u.visitRoot=function(i){return t(i,X(i).flatMap(o(this)))}),r.includes("programNode")&&(u.visitProgram=function(i){return t(i,[...i.pdas.flatMap(o(this)),...i.accounts.flatMap(o(this)),...i.instructions.flatMap(o(this)),...i.definedTypes.flatMap(o(this)),...i.errors.flatMap(o(this))])}),r.includes("pdaNode")&&(u.visitPda=function(i){return t(i,i.seeds.flatMap(o(this)))}),r.includes("accountNode")&&(u.visitAccount=function(i){var c;return t(i,[...o(this)(i.data),...i.pda?o(this)(i.pda):[],...((c=i.discriminators)!=null?c:[]).flatMap(o(this))])}),r.includes("instructionNode")&&(u.visitInstruction=function(i){var c,d,p,l,N;return t(i,[...i.accounts.flatMap(o(this)),...i.arguments.flatMap(o(this)),...((c=i.extraArguments)!=null?c:[]).flatMap(o(this)),...((d=i.remainingAccounts)!=null?d:[]).flatMap(o(this)),...((p=i.byteDeltas)!=null?p:[]).flatMap(o(this)),...((l=i.discriminators)!=null?l:[]).flatMap(o(this)),...((N=i.subInstructions)!=null?N:[]).flatMap(o(this))])}),r.includes("instructionAccountNode")&&(u.visitInstructionAccount=function(i){return t(i,[...i.defaultValue?o(this)(i.defaultValue):[]])}),r.includes("instructionArgumentNode")&&(u.visitInstructionArgument=function(i){return t(i,[...o(this)(i.type),...i.defaultValue?o(this)(i.defaultValue):[]])}),r.includes("instructionRemainingAccountsNode")&&(u.visitInstructionRemainingAccounts=function(i){return t(i,o(this)(i.value))}),r.includes("instructionByteDeltaNode")&&(u.visitInstructionByteDelta=function(i){return t(i,o(this)(i.value))}),r.includes("definedTypeNode")&&(u.visitDefinedType=function(i){return t(i,o(this)(i.type))}),r.includes("arrayTypeNode")&&(u.visitArrayType=function(i){return t(i,[...o(this)(i.count),...o(this)(i.item)])}),r.includes("enumTypeNode")&&(u.visitEnumType=function(i){return t(i,[...o(this)(i.size),...i.variants.flatMap(o(this))])}),r.includes("enumStructVariantTypeNode")&&(u.visitEnumStructVariantType=function(i){return t(i,o(this)(i.struct))}),r.includes("enumTupleVariantTypeNode")&&(u.visitEnumTupleVariantType=function(i){return t(i,o(this)(i.tuple))}),r.includes("mapTypeNode")&&(u.visitMapType=function(i){return t(i,[...o(this)(i.count),...o(this)(i.key),...o(this)(i.value)])}),r.includes("optionTypeNode")&&(u.visitOptionType=function(i){return t(i,[...o(this)(i.prefix),...o(this)(i.item)])}),r.includes("zeroableOptionTypeNode")&&(u.visitZeroableOptionType=function(i){return t(i,[...o(this)(i.item),...i.zeroValue?o(this)(i.zeroValue):[]])}),r.includes("remainderOptionTypeNode")&&(u.visitRemainderOptionType=function(i){return t(i,o(this)(i.item))}),r.includes("booleanTypeNode")&&(u.visitBooleanType=function(i){return t(i,o(this)(i.size))}),r.includes("setTypeNode")&&(u.visitSetType=function(i){return t(i,[...o(this)(i.count),...o(this)(i.item)])}),r.includes("structTypeNode")&&(u.visitStructType=function(i){return t(i,i.fields.flatMap(o(this)))}),r.includes("structFieldTypeNode")&&(u.visitStructFieldType=function(i){return t(i,[...o(this)(i.type),...i.defaultValue?o(this)(i.defaultValue):[]])}),r.includes("tupleTypeNode")&&(u.visitTupleType=function(i){return t(i,i.items.flatMap(o(this)))}),r.includes("amountTypeNode")&&(u.visitAmountType=function(i){return t(i,o(this)(i.number))}),r.includes("dateTimeTypeNode")&&(u.visitDateTimeType=function(i){return t(i,o(this)(i.number))}),r.includes("solAmountTypeNode")&&(u.visitSolAmountType=function(i){return t(i,o(this)(i.number))}),r.includes("prefixedCountNode")&&(u.visitPrefixedCount=function(i){return t(i,o(this)(i.prefix))}),r.includes("arrayValueNode")&&(u.visitArrayValue=function(i){return t(i,i.items.flatMap(o(this)))}),r.includes("constantValueNode")&&(u.visitConstantValue=function(i){return t(i,[...o(this)(i.type),...o(this)(i.value)])}),r.includes("enumValueNode")&&(u.visitEnumValue=function(i){return t(i,[...o(this)(i.enum),...i.value?o(this)(i.value):[]])}),r.includes("mapValueNode")&&(u.visitMapValue=function(i){return t(i,i.entries.flatMap(o(this)))}),r.includes("mapEntryValueNode")&&(u.visitMapEntryValue=function(i){return t(i,[...o(this)(i.key),...o(this)(i.value)])}),r.includes("setValueNode")&&(u.visitSetValue=function(i){return t(i,i.items.flatMap(o(this)))}),r.includes("someValueNode")&&(u.visitSomeValue=function(i){return t(i,o(this)(i.value))}),r.includes("structValueNode")&&(u.visitStructValue=function(i){return t(i,i.fields.flatMap(o(this)))}),r.includes("structFieldValueNode")&&(u.visitStructFieldValue=function(i){return t(i,o(this)(i.value))}),r.includes("tupleValueNode")&&(u.visitTupleValue=function(i){return t(i,i.items.flatMap(o(this)))}),r.includes("constantPdaSeedNode")&&(u.visitConstantPdaSeed=function(i){return t(i,[...o(this)(i.type),...o(this)(i.value)])}),r.includes("variablePdaSeedNode")&&(u.visitVariablePdaSeed=function(i){return t(i,o(this)(i.type))}),r.includes("resolverValueNode")&&(u.visitResolverValue=function(i){var c;return t(i,((c=i.dependsOn)!=null?c:[]).flatMap(o(this)))}),r.includes("conditionalValueNode")&&(u.visitConditionalValue=function(i){return t(i,[...o(this)(i.condition),...i.value?o(this)(i.value):[],...i.ifTrue?o(this)(i.ifTrue):[],...i.ifFalse?o(this)(i.ifFalse):[]])}),r.includes("pdaValueNode")&&(u.visitPdaValue=function(i){return t(i,[...o(this)(i.pda),...i.seeds.flatMap(o(this))])}),r.includes("pdaSeedValueNode")&&(u.visitPdaSeedValue=function(i){return t(i,o(this)(i.value))}),r.includes("fixedSizeTypeNode")&&(u.visitFixedSizeType=function(i){return t(i,o(this)(i.type))}),r.includes("sizePrefixTypeNode")&&(u.visitSizePrefixType=function(i){return t(i,[...o(this)(i.prefix),...o(this)(i.type)])}),r.includes("preOffsetTypeNode")&&(u.visitPreOffsetType=function(i){return t(i,o(this)(i.type))}),r.includes("postOffsetTypeNode")&&(u.visitPostOffsetType=function(i){return t(i,o(this)(i.type))}),r.includes("sentinelTypeNode")&&(u.visitSentinelType=function(i){return t(i,[...o(this)(i.sentinel),...o(this)(i.type)])}),r.includes("hiddenPrefixTypeNode")&&(u.visitHiddenPrefixType=function(i){return t(i,[...i.prefix.flatMap(o(this)),...o(this)(i.type)])}),r.includes("hiddenSuffixTypeNode")&&(u.visitHiddenSuffixType=function(i){return t(i,[...o(this)(i.type),...i.suffix.flatMap(o(this))])}),r.includes("constantDiscriminatorNode")&&(u.visitConstantDiscriminator=function(i){return t(i,o(this)(i.constant))}),r.includes("accountLinkNode")&&(u.visitAccountLink=function(i){return t(i,i.program?o(this)(i.program):[])}),r.includes("definedTypeLinkNode")&&(u.visitDefinedTypeLink=function(i){return t(i,i.program?o(this)(i.program):[])}),r.includes("instructionLinkNode")&&(u.visitInstructionLink=function(i){return t(i,i.program?o(this)(i.program):[])}),r.includes("instructionAccountLinkNode")&&(u.visitInstructionAccountLink=function(i){return t(i,i.instruction?o(this)(i.instruction):[])}),r.includes("instructionArgumentLinkNode")&&(u.visitInstructionArgumentLink=function(i){return t(i,i.instruction?o(this)(i.instruction):[])}),r.includes("pdaLinkNode")&&(u.visitPdaLink=function(i){return t(i,i.program?o(this)(i.program):[])}),u}function Vn(e,t={}){var a;let n=(a=t.stack)!=null?a:new $,r=new Map,u=[],o=i=>i.reduce((c,d)=>c===null||d===null?null:c+d,0),s=me(()=>null,(i,c)=>o(c),{keys:[...Pt,"definedTypeLinkNode","definedTypeNode","accountNode","instructionNode","instructionArgumentNode"]});return b(s,i=>M(i,{visitAccount(c,{self:d}){return g(c.data,d)},visitArrayType(c,{self:d}){if(!m(c.count,"fixedCountNode"))return null;let p=c.count.value,l=g(c.item,d),N=l!==null?l*p:null;return p===0?0:N},visitDefinedType(c,{self:d}){if(r.has(c.name))return r.get(c.name);u.push(c.name);let p=g(c.type,d);return u.pop(),r.set(c.name,p),p},visitDefinedTypeLink(c,{self:d}){let p=e.getPath(n.getPath(c.kind));if(!p)return null;let l=R(p);if(u.includes(l.name))return null;n.pushPath(p);let N=g(l,d);return n.popPath(),N},visitEnumEmptyVariantType(){return 0},visitEnumType(c,{self:d}){var y;let p=(y=g(c.size,d))!=null?y:1;if(Rt(c))return p;let l=c.variants.map(A=>g(A,d));return l.every((A,_,H)=>A===H[0])&&l.length>0&&l[0]!==null?l[0]+p:null},visitFixedSizeType(c){return c.size},visitInstruction(c,{self:d}){return o(c.arguments.map(p=>g(p,d)))},visitInstructionArgument(c,{self:d}){return g(c.type,d)},visitNumberType(c){return c.format==="shortU16"?null:parseInt(c.format.slice(1),10)/8},visitOptionType(c,{self:d}){if(!c.fixed)return null;let p=g(c.prefix,d),l=g(c.item,d);return l!==null?l+p:null},visitPublicKeyType(){return 32}}),i=>U(i,n))}function Nu(e={}){var u,o;let t=(u=e.indent)!=null?u:!1,n=(o=e.indentSeparator)!=null?o:"|   ",r=-1;return b(me(s=>{let a=na(s).join(".");return t?`${n.repeat(r)}${s.kind}${a?` [${a}]`:""}`:`${s.kind}${a?`[${a}]`:""}`},(s,a)=>{let i=na(s).join(".");return t?[`${n.repeat(r)}${s.kind}${i?` [${i}]`:""}`,...a].join(`
`):`${s.kind}${i?`[${i}]`:""}(${a.join(", ")})`}),s=>re(s,(a,i)=>{r+=1;let c=i(a);return r-=1,c}))}function na(e){var t,n;switch(e.kind){case"programNode":return[e.name,e.publicKey];case"instructionAccountNode":return[e.name,...e.isWritable?["writable"]:[],...e.isSigner===!0?["signer"]:[],...e.isSigner==="either"?["optionalSigner"]:[],...e.isOptional?["optional"]:[]];case"instructionRemainingAccountsNode":return[...e.isOptional?["optional"]:[],...e.isWritable?["writable"]:[],...e.isSigner===!0?["signer"]:[],...e.isSigner==="either"?["optionalSigner"]:[]];case"instructionByteDeltaNode":return[...e.subtract?["subtract"]:[],...e.withHeader?["withHeader"]:[]];case"errorNode":return[e.code.toString(),e.name];case"accountLinkNode":case"definedTypeLinkNode":case"instructionAccountLinkNode":case"instructionArgumentLinkNode":case"instructionLinkNode":case"pdaLinkNode":case"programLinkNode":return[e.name];case"numberTypeNode":return[e.format,...e.endian==="be"?["bigEndian"]:[]];case"amountTypeNode":return[e.decimals.toString(),...e.unit?[e.unit]:[]];case"stringTypeNode":return[e.encoding];case"optionTypeNode":return e.fixed?["fixed"]:[];case"fixedCountNode":return[e.value.toString()];case"numberValueNode":return[e.number.toString()];case"stringValueNode":return[e.string];case"booleanValueNode":return[e.boolean?"true":"false"];case"bytesValueNode":return[e.encoding,e.data];case"publicKeyValueNode":return[...e.identifier?[`${e.identifier}`]:[],e.publicKey];case"enumValueNode":return[e.variant];case"resolverValueNode":return[e.name];case"constantDiscriminatorNode":return[...e.offset>0?[`offset:${e.offset}`]:[]];case"fieldDiscriminatorNode":return[e.name,...e.offset>0?[`offset:${e.offset}`]:[]];case"sizeDiscriminatorNode":return[e.size.toString()];case"fixedSizeTypeNode":return[e.size.toString()];case"preOffsetTypeNode":return[e.offset.toString(),(t=e.strategy)!=null?t:"relative"];case"postOffsetTypeNode":return[e.offset.toString(),(n=e.strategy)!=null?n:"relative"];default:return"name"in e?[e.name]:[]}}function An(e,t){let n={};return n[te(e)]=t,n}function Oe(e){return An("rootNode",e)}function On(e={}){var d;let t=(d=e.includeDataArgumentValueNodes)!=null?d:!1,n=[],r=[],u=new Map,o=new Map;function s(p,l){if(m(l,"instructionAccountNode")&&u.has(l.name)||m(l,"instructionArgumentNode")&&o.has(l.name))return;if(n.some(({kind:A,name:_})=>A===l.kind&&_===l.name)){let A=[...n,l];throw new V(Vt,{cycle:A,formattedCycle:A.map(({name:_})=>_).join(" -> "),instruction:p,instructionName:p.name})}n.push(l);let y=l.kind==="instructionAccountNode"?a(p,l):i(p,l);n.pop(),r.push(y),y.kind==="instructionAccountNode"?u.set(l.name,y):o.set(l.name,y)}function a(p,l){var A;let N=Ae(l);c(p,l,N);let y={...l,dependsOn:N,isPda:Q(p).some(_=>m(_.defaultValue,"accountBumpValueNode")&&_.defaultValue.name===l.name),resolvedIsOptional:!!l.isOptional,resolvedIsSigner:l.isSigner};switch((A=y.defaultValue)==null?void 0:A.kind){case"accountValueNode":let _=u.get(y.defaultValue.name),H=l.isSigner===!1&&_.isSigner===!1,Y=l.isSigner===!0&&_.isSigner===!0,ie=!H&&!Y;y.resolvedIsSigner=ie?"either":Y,y.resolvedIsOptional=!!_.isOptional;break;case"publicKeyValueNode":case"programLinkNode":case"programIdValueNode":y.resolvedIsSigner=l.isSigner===!1?!1:"either",y.resolvedIsOptional=!1;break;case"pdaValueNode":y.resolvedIsSigner=l.isSigner===!1?!1:"either",y.resolvedIsOptional=!1;let{seeds:pt}=y.defaultValue;pt.forEach(ye=>{if(!m(ye.value,"accountValueNode"))return;if(u.get(ye.value.name).resolvedIsOptional)throw new V(At,{instruction:p,instructionAccount:l,instructionAccountName:l.name,instructionName:p.name,seed:ye,seedName:ye.name,seedValueName:ye.value.name})});break;case"identityValueNode":case"payerValueNode":case"resolverValueNode":y.resolvedIsOptional=!1;break;default:break}return y}function i(p,l){let N=Ae(l);return c(p,l,N),{...l,dependsOn:N}}function c(p,l,N){N.forEach(y=>{let A=null;if(m(y,"accountValueNode")){let _=p.accounts.find(H=>H.name===y.name);if(!_)throw new V(Fe,{dependency:y,dependencyKind:y.kind,dependencyName:y.name,instruction:p,instructionName:p.name,parent:l,parentKind:l.kind,parentName:l.name});A={..._}}else if(m(y,"argumentValueNode")){let _=Q(p).find(H=>H.name===y.name);if(!_)throw new V(Fe,{dependency:y,dependencyKind:y.kind,dependencyName:y.name,instruction:p,instructionName:p.name,parent:l,parentKind:l.kind,parentName:l.name});A={..._}}A&&s(p,A)})}return An("instructionNode",p=>{var N;return n=[],r=[],u=new Map,o=new Map,[...p.accounts,...p.arguments.filter(y=>t?y.defaultValue:y.defaultValue&&!m(y.defaultValue,C)),...((N=p.extraArguments)!=null?N:[]).filter(y=>y.defaultValue)].forEach(y=>{s(p,y)}),r})}function mn(e){let t=new Map,n=new Map;return e.forEach(r=>{m(r,"accountValueNode")?t.set(r.name,r):m(r,"argumentValueNode")&&n.set(r.name,r)}),[...t.values(),...n.values()]}function Ae(e){var n,r;if(m(e,"instructionNode"))return mn([...e.accounts.flatMap(Ae),...e.arguments.flatMap(Ae),...((n=e.extraArguments)!=null?n:[]).flatMap(Ae)]);if(!e.defaultValue)return[];let t=u=>u?Ae({...e,defaultValue:u}):[];if(m(e.defaultValue,["accountValueNode","accountBumpValueNode"]))return[je(e.defaultValue.name)];if(m(e.defaultValue,["argumentValueNode"]))return[$e(e.defaultValue.name)];if(m(e.defaultValue,"pdaValueNode")){let u=new Map;return e.defaultValue.seeds.forEach(o=>{m(o.value,["accountValueNode","argumentValueNode"])&&u.set(o.value.name,{...o.value})}),[...u.values()]}return m(e.defaultValue,"resolverValueNode")?(r=e.defaultValue.dependsOn)!=null?r:[]:m(e.defaultValue,"conditionalValueNode")?mn([...t(e.defaultValue.condition),...t(e.defaultValue.ifTrue),...t(e.defaultValue.ifFalse)]):[]}function ne(e={}){return xe(e)}function ua(e={}){return re(ne(e),(t,n)=>"docs"in t?n({...t,docs:[]}):n(t))}function Sn(e={}){var n;return((n=e.removeDocs)!=null?n:!1)?ft(ua(),r=>(0,yn.default)(r)):Yt(r=>(0,yn.default)(r))}function ca(e,t){let n=!0;return re(e,(r,u)=>{try{if(n){n=!1;let o=t(r,u);return n=!0,o}return u(r)}catch(o){throw n=!0,o}})}var Nn=["accountNode","definedTypeNode","instructionAccountNode","instructionArgumentNode","instructionNode","pdaNode","programNode"],w=class{constructor(){we(this,"programs",new Map)}recordPath(e){let t=R(e),n=this.getOrCreateProgramDictionary(e);if(!n)return this;let r=this.getOrCreateInstructionDictionary(n,e);return pe(e,"accountNode")?n.accounts.set(t.name,e):pe(e,"definedTypeNode")?n.definedTypes.set(t.name,e):pe(e,"pdaNode")?n.pdas.set(t.name,e):r&&pe(e,"instructionAccountNode")?r.accounts.set(t.name,e):r&&pe(e,"instructionArgumentNode")&&r.arguments.set(t.name,e),this}getPathOrThrow(e){let t=this.getPath(e);if(!t){let n=R(e);throw new V(vt,{kind:n.kind,linkNode:n,name:n.name,path:e})}return t}getPath(e){let t=R(e),n=this.getProgramDictionary(e);if(!n)return;let r=this.getInstructionDictionary(n,e);if(m(t,"accountLinkNode"))return n.accounts.get(t.name);if(m(t,"definedTypeLinkNode"))return n.definedTypes.get(t.name);if(m(t,"instructionAccountLinkNode"))return r==null?void 0:r.accounts.get(t.name);if(m(t,"instructionArgumentLinkNode"))return r==null?void 0:r.arguments.get(t.name);if(m(t,"instructionLinkNode"))return r==null?void 0:r.instruction;if(m(t,"pdaLinkNode"))return n.pdas.get(t.name);if(m(t,"programLinkNode"))return n.program}getOrThrow(e){return R(this.getPathOrThrow(e))}get(e){let t=this.getPath(e);return t?R(t):void 0}has(e){let t=R(e),n=this.getProgramDictionary(e);if(!n)return!1;let r=this.getInstructionDictionary(n,e);return m(t,"accountLinkNode")?n.accounts.has(t.name):m(t,"definedTypeLinkNode")?n.definedTypes.has(t.name):m(t,"instructionAccountLinkNode")?!!r&&r.accounts.has(t.name):m(t,"instructionArgumentLinkNode")?!!r&&r.arguments.has(t.name):m(t,"instructionLinkNode")?n.instructions.has(t.name):m(t,"pdaLinkNode")?n.pdas.has(t.name):!!m(t,"programLinkNode")}getOrCreateProgramDictionary(e){let t=R(e),n=m(t,"programNode")?t:se(e);if(!n)return;let r=this.programs.get(n.name);return r||(r={accounts:new Map,definedTypes:new Map,instructions:new Map,pdas:new Map,program:pn(e,"programNode")},this.programs.set(n.name,r)),r}getOrCreateInstructionDictionary(e,t){let n=R(t),r=m(n,"instructionNode")?n:dn(t);if(!r)return;let u=e.instructions.get(r.name);return u||(u={accounts:new Map,arguments:new Map,instruction:pn(t,"instructionNode")},e.instructions.set(r.name,u)),u}getProgramDictionary(e){var r,u,o,s;let t=R(e),n;return m(t,"programLinkNode")?n=t.name:"program"in t?n=(r=t.program)==null?void 0:r.name:"instruction"in t&&(n=(o=(u=t.instruction)==null?void 0:u.program)==null?void 0:o.name),n=n!=null?n:(s=se(e))==null?void 0:s.name,n?this.programs.get(n):void 0}getInstructionDictionary(e,t){var u,o;let n=R(t),r;return m(n,"instructionLinkNode")?r=n.name:"instruction"in n&&(r=(u=n.instruction)==null?void 0:u.name),r=r!=null?r:(o=dn(t))==null?void 0:o.name,r?e.instructions.get(r):void 0}};function la(e={}){return me(()=>{},()=>{},e)}function Xt(e){let t=new $;return b(la(),n=>re(n,(r,u)=>(m(r,Nn)&&e.recordPath(t.getPath(Nn)),u(r))),n=>U(n,t))}function z(e,t){let n=Xt(t);return b(e,r=>ca(r,(u,o)=>(g(u,n),o(u))))}function vu(e,t,n){let r={...e};return r[te(t)]=function(o){return n(o),e[te(t)].bind(this)(o)},r}var fa=["debug","trace","info","warn","error"];function k(e,t,n,r){return{level:e,message:t,node:n,path:Array.isArray(r)?r:r.getPath()}}var dt=e=>fa.indexOf(e);function gu(){let e=new w,t=new $;return b(me(()=>[],(n,r)=>r.flat()),n=>z(n,e),n=>U(n,t),n=>M(n,{visitAccount(r,{next:u}){let o=[];return r.name||o.push(k("error","Account has no name.",r,t)),[...o,...u(r)]},visitDefinedType(r,{next:u}){let o=[];return r.name||o.push(k("error","Defined type has no name.",r,t)),[...o,...u(r)]},visitDefinedTypeLink(r,{next:u}){let o=[];return r.name?e.has(t.getPath(r.kind))||o.push(k("error",`Pointing to a missing defined type named "${r.name}"`,r,t)):o.push(k("error","Pointing to a defined type with no name.",r,t)),[...o,...u(r)]},visitEnumEmptyVariantType(r,{next:u}){let o=[];return r.name||o.push(k("error","Enum variant has no name.",r,t)),[...o,...u(r)]},visitEnumStructVariantType(r,{next:u}){let o=[];return r.name||o.push(k("error","Enum variant has no name.",r,t)),[...o,...u(r)]},visitEnumTupleVariantType(r,{next:u}){let o=[];return r.name||o.push(k("error","Enum variant has no name.",r,t)),[...o,...u(r)]},visitEnumType(r,{next:u}){let o=[];return r.variants.length===0&&o.push(k("warn","Enum has no variants.",r,t)),r.variants.forEach(s=>{s.name||o.push(k("error","Enum variant has no name.",r,t))}),[...o,...u(r)]},visitError(r,{next:u}){let o=[];return r.name||o.push(k("error","Error has no name.",r,t)),typeof r.code!="number"&&o.push(k("error","Error has no code.",r,t)),r.message||o.push(k("warn","Error has no message.",r,t)),[...o,...u(r)]},visitInstruction(r,{next:u}){let o=[];r.name||o.push(k("error","Instruction has no name.",r,t));let s=new Map;r.accounts.forEach(l=>{var y;if(!l.name){o.push(k("error","Instruction account has no name.",r,t));return}let N=((y=s.get(l.name))!=null?y:0)+1;s.set(l.name,N),N===2&&o.push(k("error",`Account name "${l.name}" is not unique in instruction "${r.name}".`,r,t))});let a=On();try{g(r,a)}catch(l){o.push(k("error",l.message,r,t))}let c=Q(r).map(({name:l})=>v(l)).filter((l,N,y)=>y.indexOf(l)!==N),d=[...new Set(c)];return d.length>0&&o.push(k("error",`The names of the following instruction arguments are conflicting: [${d.join(", ")}].`,r,t)),Q(r).forEach(l=>{let{defaultValue:N}=l;if(m(N,"accountBumpValueNode")){let y=r.accounts.find(A=>A.name===N.name);y&&y.isSigner!==!1&&o.push(k("error",`Argument ${l.name} cannot default to the bump attribute of the [${N.name}] account as it may be a Signer.`,r,t))}}),[...o,...u(r)]},visitProgram(r,{next:u}){let o=[];return r.name||o.push(k("error","Program has no name.",r,t)),r.publicKey||o.push(k("error","Program has no public key.",r,t)),r.version||o.push(k("warn","Program has no version.",r,t)),r.origin||o.push(k("info","Program has no origin.",r,t)),[...o,...u(r)]},visitStructFieldType(r,{next:u}){let o=[];return r.name||o.push(k("error","Struct field has no name.",r,t)),[...o,...u(r)]},visitStructType(r,{next:u}){let o=[],s=new Map;return r.fields.forEach(a=>{var c;if(!a.name)return;let i=((c=s.get(a.name))!=null?c:0)+1;s.set(a.name,i),i===2&&o.push(k("error",`Struct field name "${a.name}" is not unique.`,a,t))}),[...o,...u(r)]},visitTupleType(r,{next:u}){let o=[];return r.items.length===0&&o.push(k("warn","Tuple has no items.",r,t)),[...o,...u(r)]}}))}function Tu(e,t="error"){return ft(e,n=>{let r=[...n].sort((o,s)=>dt(s.level)-dt(o.level)).reduce((o,s)=>{var a;return o[s.level]=((a=o[s.level])!=null?a:0)+1,o},{});if(Object.keys(r).map(o=>dt(o)).sort((o,s)=>s-o)[0]>=dt(t)){let o=Object.keys(r).map(s=>`${s}s: ${r[s]}`).join(", ");throw new V(bt,{formattedHistogram:o,validationItems:n})}})}function hu(e){return E(Object.entries(e).map(([t,n])=>({select:`[programNode]${v(t)}`,transform:u=>{f(u,"programNode");let o=new Set(u.pdas.map(i=>i.name)),s=new Set(n.map(i=>i.name)),a=new Set([...o].filter(i=>s.has(i)));if(a.size>0)throw new V(Tt,{duplicatedPdaNames:[...a],program:u,programName:u.name});return q({...u,pdas:[...u.pdas,...n.map(i=>ee({name:i.name,seeds:i.seeds}))]})}})))}function Vu(){return E([{select:"[instructionNode]",transform:e=>(f(e,"instructionNode"),F({...e,arguments:En(e.arguments)}))}])}var En=(e,t="*")=>{let n=t==="*"?t:t.map(v),r=c=>t==="*"||n.includes(v(c.name)),u=e.flatMap(c=>m(c.type,"structTypeNode")&&r(c)?c.type.fields.map(d=>x({...d})):c),s=u.map(c=>c.name).filter((c,d,p)=>p.indexOf(c)!==d),a=[...new Set(s)],i=a.length>0;if(i)throw new V(Se,{conflictingAttributes:a});return i?e:u};function Au(e){let t=new w,n=E(Object.entries(e).map(([r,u])=>({select:["[instructionNode]",r],transform:(o,s)=>{var N,y;f(o,"instructionNode");let a=o.arguments,i=v(u),c=a.findIndex(A=>A.name===i),d=c>=0?a[c]:null;if(!d)throw new V(Me,{argumentName:i,instruction:o,instructionName:o.name});let p;if(m(d.type,"enumTypeNode"))p=d.type;else if(m(d.type,"definedTypeLinkNode")&&t.has([...s.getPath(),d.type])){let A=(N=t.get([...s.getPath(),d.type]))==null?void 0:N.type;f(A,"enumTypeNode"),p=A}else throw new V(Me,{argumentName:i,instruction:o,instructionName:o.name});let l=p.variants.map((A,_)=>{let H=v(`${o.name} ${A.name}`),Y=a.slice(0,c);return Y.push(x({defaultValue:$r(_),defaultValueStrategy:"omitted",name:`${H}Discriminator`,type:ce("u8")})),m(A,"enumStructVariantTypeNode")?Y.push(x({...d,type:A.struct})):m(A,"enumTupleVariantTypeNode")&&Y.push(x({...d,type:A.tuple})),Y.push(...a.slice(c+1)),F({...o,arguments:En(Y),name:H})});return F({...o,subInstructions:[...(y=o.subInstructions)!=null?y:[],...l]})}})));return b(n,r=>z(r,t))}function Ou(){return Oe(e=>{let t=new Map,n=X(e);n.forEach(o=>{o.definedTypes.forEach(s=>{var c;let a={program:o,type:s},i=(c=t.get(s.name))!=null?c:[];t.set(s.name,[...i,a])})}),t.forEach((o,s)=>{o.length<=1&&t.delete(s)});let r=Sn({removeDocs:!0});t.forEach((o,s)=>{o.map(c=>g(c.type,r)).every((c,d,p)=>c===p[0])||t.delete(s)});let u=Array.from(t.values()).flatMap(o=>{let s=o.sort((i,c)=>n.indexOf(i.program)-n.indexOf(c.program)),[,...a]=s;return a}).map(({program:o,type:s})=>`[programNode]${o.name}.[definedTypeNode]${s.name}`);if(u.length>0){let o=g(e,hn(u));return f(o,"rootNode"),o}return e})}function bn(e,t,n=!1){let r=R(e);return b(xe({keys:ue}),u=>M(u,{visitPdaValue(o,{next:s}){let a=s(o);f(a,"pdaValueNode");let i=m(a.pda,"pdaNode")?a.pda:t.get([...e,a.pda]);if(!i)return a;let c=Su(r,i,a.seeds);if(n&&!bu(r,i,c))throw new V(ht,{instruction:r,instructionName:r.name,pda:i,pdaName:i.name});return Be(a.pda,c)}}))}function Su(e,t,n){let r=new Set(n.map(o=>o.name)),u=Eu(e,t).filter(o=>!r.has(o.name));return[...n,...u]}function Eu(e,t){return t.seeds.flatMap(n=>{if(!m(n,"variablePdaSeedNode"))return[];let r=e.accounts.some(o=>o.name===n.name);return m(n.type,"publicKeyTypeNode")&&r?[Ee(n.name,je(n.name))]:Q(e).some(o=>o.name===n.name)?[Ee(n.name,$e(n.name))]:[]})}function bu(e,t,n){let r=t.seeds.filter(br("variablePdaSeedNode")).length===n.length,u=e.accounts.map(a=>a.name),o=Q(e).map(a=>a.name),s=n.every(a=>m(a.value,"accountValueNode")?u.includes(a.value.name):m(a.value,"argumentValueNode")?o.includes(a.value.name):!0);return r&&s}function _u(e){return E(Object.entries(e).map(([t,n])=>({select:`${t}.[structTypeNode]`,transform:r=>pa(r,n)})))}var pa=(e,t="*")=>{f(e,"structTypeNode");let n=t==="*"?t:t.map(v),r=c=>t==="*"||n.includes(v(c.name)),u=e.fields.flatMap(c=>m(c.type,"structTypeNode")&&r(c)?c.type.fields:[c]),s=u.map(c=>c.name).filter((c,d,p)=>p.indexOf(c)!==d),a=[...new Set(s)],i=a.length>0;if(i)throw new V(Se,{conflictingAttributes:a});return i?e:K(u)};function da(e){let t={};return e.forEach(n=>{Object.keys(n).forEach(r=>{let u=r;t[u]===void 0?t[u]=n[u]:(t[u].total+=n[u].total,t[u].inAccounts+=n[u].inAccounts,t[u].inDefinedTypes+=n[u].inDefinedTypes,t[u].inInstructionArgs+=n[u].inInstructionArgs,t[u].directlyAsInstructionArgs+=n[u].directlyAsInstructionArgs)})}),t}function _n(){let e=new $,t=null,n=0;return b(me(()=>({}),(r,u)=>da(u)),r=>re(r,(u,o)=>{n+=1;let s=o(u);return n-=1,s}),r=>M(r,{visitAccount(u,{self:o}){t="account",n=0;let s=g(u.data,o);return t=null,s},visitDefinedType(u,{self:o}){t="definedType",n=0;let s=g(u.type,o);return t=null,s},visitDefinedTypeLink(u){let o=se(e.getPath());return{[o?`${o.name}.${u.name}`:u.name]:{directlyAsInstructionArgs:+(t==="instruction"&&n<=1),inAccounts:+(t==="account"),inDefinedTypes:+(t==="definedType"),inInstructionArgs:+(t==="instruction"),total:1}}},visitInstruction(u,{self:o}){var c,d;t="instruction",n=0;let s=u.arguments.map(p=>g(p,o)),a=((c=u.extraArguments)!=null?c:[]).map(p=>g(p,o));t=null;let i=((d=u.subInstructions)!=null?d:[]).map(p=>g(p,o));return da([...s,...a,...i])}}),r=>U(r,e))}function Iu(e){return E(Object.entries(e).map(([t,{field:n,value:r,offset:u}])=>({select:["[accountNode]",t],transform:o=>{var c;f(o,"accountNode");let s=Te(o.data),a=s.fields.findIndex(d=>d.name===n);if(a<0)throw new V(Ot,{account:o,missingField:n,name:o.name});let i=s.fields[a];return Z({...o,data:fe(o.data,()=>K([...s.fields.slice(0,a),W({...i,defaultValue:r,defaultValueStrategy:"omitted"}),...s.fields.slice(a+1)])),discriminators:[qe(n,u),...(c=o.discriminators)!=null?c:[]]})}})))}function Du(){let e=new w,t=Zt([{select:n=>pe(n,"accountNode")&&R(n).size===void 0,transform:(n,r)=>{f(n,"accountNode");let u=g(n.data,Vn(e,{stack:r}));return u===null?n:Z({...n,size:u})}}],{keys:["rootNode","programNode","accountNode"]});return b(t,n=>z(n,e))}var ku=()=>[{account:/^(payer|feePayer)$/,defaultValue:ir(),ignoreIfOptional:!0},{account:/^(authority)$/,defaultValue:nr(),ignoreIfOptional:!0},{account:/^(programId)$/,defaultValue:kt(),ignoreIfOptional:!0},{account:/^(systemProgram|splSystemProgram)$/,defaultValue:P("11111111111111111111111111111111","splSystem"),ignoreIfOptional:!0},{account:/^(tokenProgram|splTokenProgram)$/,defaultValue:P("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA","splToken"),ignoreIfOptional:!0},{account:/^(ataProgram|splAtaProgram)$/,defaultValue:P("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL","splAssociatedToken"),ignoreIfOptional:!0},{account:/^(tokenMetadataProgram|mplTokenMetadataProgram)$/,defaultValue:P("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s","mplTokenMetadata"),ignoreIfOptional:!0},{account:/^(tokenAuth|mplTokenAuth|authorization|mplAuthorization|auth|mplAuth)RulesProgram$/,defaultValue:P("auth9SigNpDKz4sJJ1DfCTuZrZNSAgh9sFD3rboVmgg","mplTokenAuthRules"),ignoreIfOptional:!0},{account:/^(candyMachineProgram|mplCandyMachineProgram)$/,defaultValue:P("CndyV3LdqHUfDLmE5naZjVN8rBZz4tqhdefbAnjHG3JR","mplCandyMachine"),ignoreIfOptional:!0},{account:/^(candyGuardProgram|mplCandyGuardProgram)$/,defaultValue:P("Guard1JwRhJkVH6XZhzoYxeBVQe872VH6QggF4BWmS9g","mplCandyGuard"),ignoreIfOptional:!0},{account:/^(clockSysvar|sysvarClock)$/,defaultValue:P("SysvarC1ock11111111111111111111111111111111"),ignoreIfOptional:!0},{account:/^(epochScheduleSysvar|sysvarEpochSchedule)$/,defaultValue:P("SysvarEpochSchedu1e111111111111111111111111"),ignoreIfOptional:!0},{account:/^(instructions?Sysvar|sysvarInstructions?)(Account)?$/,defaultValue:P("Sysvar1nstructions1111111111111111111111111"),ignoreIfOptional:!0},{account:/^(recentBlockhashesSysvar|sysvarRecentBlockhashes)$/,defaultValue:P("SysvarRecentB1ockHashes11111111111111111111"),ignoreIfOptional:!0},{account:/^(rent|rentSysvar|sysvarRent)$/,defaultValue:P("SysvarRent111111111111111111111111111111111"),ignoreIfOptional:!0},{account:/^(rewardsSysvar|sysvarRewards)$/,defaultValue:P("SysvarRewards111111111111111111111111111111"),ignoreIfOptional:!0},{account:/^(slotHashesSysvar|sysvarSlotHashes)$/,defaultValue:P("SysvarS1otHashes111111111111111111111111111"),ignoreIfOptional:!0},{account:/^(slotHistorySysvar|sysvarSlotHistory)$/,defaultValue:P("SysvarS1otHistory11111111111111111111111111"),ignoreIfOptional:!0},{account:/^(stakeHistorySysvar|sysvarStakeHistory)$/,defaultValue:P("SysvarStakeHistory1111111111111111111111111"),ignoreIfOptional:!0},{account:/^(mplCoreProgram)$/,defaultValue:P("CoREENxT6tW1HoK8ypY1SxRMZTcVPm7R94rH4PZNhX7d","mplCore"),ignoreIfOptional:!0}];function Ru(e){let t=new w,n=new $,r=e.sort((o,s)=>{let a="instruction"in o,i="instruction"in s;return a&&i||!o&&!i?0:a?-1:1});function u(o,s){return r.find(a=>"instruction"in a&&a.instruction&&v(a.instruction)!==o.name?!1:typeof a.account=="string"?v(a.account)===s.name:a.account.test(s.name))}return b(ne({keys:["rootNode","programNode","instructionNode"]}),o=>M(o,{visitInstruction(s){let a=n.getPath("instructionNode"),i=s.accounts.map(c=>{var p;let d=u(s,c);if(!d||(p=d.ignoreIfOptional)!=null&&p&&(c.isOptional||c.defaultValue))return c;try{return{...c,defaultValue:g(d.defaultValue,bn(a,t,!0))}}catch{return c}});return F({...s,accounts:i})}}),o=>U(o,n),o=>z(o,t))}function Pu(e){return E(Object.entries(e).map(([t,n])=>({select:["[instructionNode]",t],transform:r=>{var o,s,a,i,c,d;f(r,"instructionNode");let u=x({defaultValue:n.value,defaultValueStrategy:(o=n.strategy)!=null?o:"omitted",docs:(s=n.docs)!=null?s:[],name:(a=n.name)!=null?a:"discriminator",type:(i=n.type)!=null?i:ce("u8")});return F({...r,arguments:[u,...r.arguments],discriminators:[qe((c=n.name)!=null?c:"discriminator"),...(d=r.discriminators)!=null?d:[]]})}})))}function Cu(e){return E(Object.entries(e).map(([t,n])=>({select:`${t}.[numberTypeNode]`,transform:r=>{switch(J(r,"numberTypeNode"),n.kind){case"DateTime":return Ye(r);case"SolAmount":return et(r);case"Amount":return He(r,n.decimals,n.unit);default:throw new V(St,{wrapper:n})}}})))}function xu(e){return E(Object.entries(e).flatMap(([t,n])=>{let r=Object.fromEntries(Object.entries(n).map(([u,o])=>[v(u),o]));return[{select:`${t}.[structTypeNode]`,transform:u=>{f(u,"structTypeNode");let o=u.fields.map(s=>{let a=r[s.name];return a===void 0?s:a===null?W({...s,defaultValue:void 0,defaultValueStrategy:void 0}):W({...s,defaultValue:"kind"in a?a:a.value,defaultValueStrategy:"kind"in a?void 0:a.strategy})});return K(o)}},{select:["[instructionNode]",t],transform:u=>{f(u,"instructionNode");let o=s=>{let a=r[s.name];return a===void 0?s:a===null?x({...s,defaultValue:void 0,defaultValueStrategy:void 0}):x({...s,defaultValue:"kind"in a?a:a.value,defaultValueStrategy:"kind"in a?void 0:a.strategy})};return F({...u,arguments:u.arguments.map(o),extraArguments:u.extraArguments?u.extraArguments.map(o):void 0})}}]}))}function Lu(e){return b(ne({keys:["rootNode","programNode"]}),t=>M(t,{visitProgram(n){let r=n.definedTypes.filter(s=>e.includes(s.name)),u=n.definedTypes.filter(s=>!e.includes(s.name)),o=r.map(s=>(f(s.type,"structTypeNode"),Z({...s,data:s.type,discriminators:[],size:void 0})));return q({...n,accounts:[...n.accounts,...o],definedTypes:u})}}))}function wu(e="*"){let t=n=>m(n,"fixedCountNode")?e==="*"||e.includes(n.value):!1;return b(ne(),n=>M(n,{visitArrayType(r,{self:u}){let o=g(r.item,u);return f(o,I),m(o,"numberTypeNode")&&o.format==="u8"&&m(r.count,"fixedCountNode")&&t(r.count)?Xe(Ge(),r.count.value):We(o,r.count)}}))}function In(e="*"){let t=new w,n=new $,r=(e==="*"?[]:e).map(o=>{if(!o.includes("."))return v(o);let[s,a]=o.split(".");return`${v(s)}.${v(a)}`}),u=(o,s)=>{if(e==="*")return!0;let a=`${s}.${o}`;return s&&r.includes(a)?!0:r.includes(o)};return b(ne(),o=>M(o,{visitDefinedTypeLink(s,{self:a}){var l,N,y;let i=(y=(l=s.program)==null?void 0:l.name)!=null?y:(N=se(n.getPath()))==null?void 0:N.name;if(!u(s.name,i))return s;let c=t.getPathOrThrow(n.getPath("definedTypeLinkNode")),d=R(c);n.pushPath(c);let p=g(d.type,a);return n.popPath(),p},visitProgram(s,{self:a}){return q({...s,accounts:s.accounts.map(i=>g(i,a)).filter(Qe("accountNode")),definedTypes:s.definedTypes.filter(i=>!u(i.name,s.name)).map(i=>g(i,a)).filter(Qe("definedTypeNode")),instructions:s.instructions.map(i=>g(i,a)).filter(Qe("instructionNode"))})}}),o=>U(o,n),o=>z(o,t))}function Fu(){return Oe(e=>{let t=g(e,_n()),n=new w;g(e,Xt(n));let r=Object.keys(t).filter(u=>{var o,s;return((o=t[u].total)!=null?o:0)===1&&((s=t[u].directlyAsInstructionArgs)!=null?s:0)===1}).filter(u=>{let o=u.split("."),s=o.length==2?oe(o[1],o[0]):oe(u),a=n.get([s]);return a&&!m(a.type,"enumTypeNode")});if(r.length>0){let u=In(r),o=g(e,u);return f(o,"rootNode"),o}return e})}function Mu(e="*"){let t=e==="*"?[()=>!0]:e.map(r=>Jt(r)),n=r=>t.some(u=>u(r.getPath()));return Oe(r=>{let u=[],o=new Map(Wr(r).map(c=>[c.name,c])),s=g(r,E([{select:"[enumTupleVariantTypeNode]",transform:(c,d)=>{if(f(c,"enumTupleVariantTypeNode"),!n(d))return c;let p=Te(c.tuple);if(p.items.length!==1)return c;let l=p.items[0];if(m(l,"definedTypeLinkNode")){let y=o.get(l.name);if(!y||!m(y.type,"structTypeNode"))return c;u.push(l.name),l=y.type}if(!m(l,"structTypeNode"))return c;let N=fe(c.tuple,()=>l);return ge(c.name,N)}}]));f(s,"rootNode");let a=g(s,_n()),i=u.filter(c=>!a[c]||a[c].total===0);return s=g(s,In(i)),f(s,"rootNode"),s})}function ju(e){let t=new w,n=e.map(r=>({select:["[definedTypeLinkNode]",r],transform:(u,o)=>t.getOrThrow(o.getPath("definedTypeLinkNode")).type}));return b(E(n),r=>z(r,t))}function ma(e,t){return K(e.fields.map(n=>t[n.name]?W({...n,name:t[n.name]}):n))}function $u(e,t){return Ze(e.variants.map(n=>t[n.name]?Uu(n,t[n.name]):n),{...e})}function Uu(e,t){return m(e,"enumStructVariantTypeNode")?ge(t,e.struct):m(e,"enumTupleVariantTypeNode")?Je(t,e.tuple):le(t)}function zu(e){return E(Object.entries(e).flatMap(([t,n])=>{let r=typeof n=="object"&&"name"in n&&n.name?v(n.name):void 0,u=[],o=[{select:["[accountNode]",t],transform:(s,a)=>{if(f(s,"accountNode"),"delete"in n)return null;let i=se(a.getPath()),{seeds:c,pda:d,...p}=n,l=s.pda;return d&&c!==void 0?(l=d,u.push({pda:ee({name:d.name,seeds:c}),program:i.name})):d?l=d:c!==void 0&&s.pda?u.push({pda:ee({name:s.pda.name,seeds:c}),program:i.name}):c!==void 0&&(l=ve(r!=null?r:s.name),u.push({pda:ee({name:r!=null?r:s.name,seeds:c}),program:i.name})),Z({...s,...p,data:fe(s.data,N=>{var y;return ma(N,(y=n.data)!=null?y:{})}),pda:l})}},{select:"[programNode]",transform:s=>{f(s,"programNode");let a=u.filter(l=>l.program===s.name).map(l=>l.pda);if(a.length===0)return s;let i=new Set(s.pdas.map(l=>l.name)),c=a.filter(l=>!i.has(l.name)),d=new Map(a.filter(l=>i.has(l.name)).map(l=>[l.name,l])),p=[...s.pdas.map(l=>{var N;return(N=d.get(l.name))!=null?N:l}),...c];return q({...s,pdas:p})}}];return r&&o.push({select:["[accountLinkNode]",t],transform:s=>(f(s,"accountLinkNode"),Ue(r))},{select:["[pdaNode]",t],transform:s=>(f(s,"pdaNode"),ee({name:r,seeds:s.seeds}))},{select:["[pdaLinkNode]",t],transform:s=>(f(s,"pdaLinkNode"),ve(r))}),o}))}function Bu(e){return E(Object.entries(e).flatMap(([t,n])=>{let r=typeof n=="object"&&"name"in n&&n.name?v(n.name):void 0,u=[{select:["[definedTypeNode]",t],transform:o=>{if(f(o,"definedTypeNode"),"delete"in n)return null;let{data:s,...a}=n,i=o.type;return m(o.type,"structTypeNode")?i=ma(o.type,s!=null?s:{}):m(o.type,"enumTypeNode")&&(i=$u(o.type,s!=null?s:{})),rt({...o,...a,name:r!=null?r:o.name,type:i})}}];return r&&u.push({select:["[definedTypeLinkNode]",t],transform:o=>(f(o,"definedTypeLinkNode"),oe(r))}),u}))}function Ku(e){return E(Object.entries(e).map(([t,n])=>({select:`[errorNode]${t}`,transform:r=>(f(r,"errorNode"),"delete"in n?null:Gr({...r,...n}))})))}function qu(e){let t=new w,n=new $,r=Object.entries(e).map(([u,o])=>({select:["[instructionNode]",u],transform:s=>{if(f(s,"instructionNode"),"delete"in o)return null;let a=n.getPath("instructionNode"),{accounts:i,arguments:c,...d}=o,{newArguments:p,newExtraArguments:l}=Hu(s,c!=null?c:{}),N=s.accounts.map(y=>Gu(a,y,i!=null?i:{},t));return F({...s,...d,accounts:N,arguments:p,extraArguments:l.length>0?l:void 0})}}));return b(E(r),u=>U(u,n),u=>z(u,t))}function Gu(e,t,n,r){let u=n==null?void 0:n[t.name];if(!u)return t;let{defaultValue:o,...s}={...t,...u};return o?_e({...s,defaultValue:g(o,bn(e,r))}):_e(s)}function Hu(e,t){var s;let n=new Set,r=e.arguments.map(a=>{var c,d,p,l,N;let i=t[a.name];return i?(n.add(a.name),x({...a,defaultValue:(c=i.defaultValue)!=null?c:a.defaultValue,defaultValueStrategy:(d=i.defaultValueStrategy)!=null?d:a.defaultValueStrategy,docs:(p=i.docs)!=null?p:a.docs,name:(l=i.name)!=null?l:a.name,type:(N=i.type)!=null?N:a.type})):a}),o=[...((s=e.extraArguments)!=null?s:[]).map(a=>{var c,d,p,l,N;if(n.has(a.name))return a;let i=t[a.name];return i?(n.add(a.name),x({...a,defaultValue:(c=i.defaultValue)!=null?c:a.defaultValue,defaultValueStrategy:(d=i.defaultValueStrategy)!=null?d:a.defaultValueStrategy,docs:(p=i.docs)!=null?p:a.docs,name:(l=i.name)!=null?l:a.name,type:(N=i.type)!=null?N:a.type})):a}),...Object.entries(t).filter(([a])=>!n.has(a)).map(([a,i])=>{var d,p,l,N;let{type:c}=i;return f(c,I),x({defaultValue:(d=i.defaultValue)!=null?d:void 0,defaultValueStrategy:(p=i.defaultValueStrategy)!=null?p:void 0,docs:(l=i.docs)!=null?l:[],name:(N=i.name)!=null?N:a,type:c})})];return{newArguments:r,newExtraArguments:o}}function Wu(e){return E(Object.entries(e).flatMap(([t,n])=>{let r=typeof n=="object"&&"name"in n&&n.name?v(n.name):void 0,u=[{select:`[programNode]${t}`,transform:o=>(f(o,"programNode"),"delete"in n?null:q({...o,...n}))}];return r&&u.push({select:`[programLinkNode]${t}`,transform:o=>(f(o,"programLinkNode"),Ne(r))}),u}))}function Dn(e){let t=e;return ya(t.version),{accept(n){return g(t,n)},clone(){return Dn({...t})},getJson(){return JSON.stringify(t)},getRoot(){return t},update(n){let r=g(t,n);f(r,"rootNode"),t=r}}}function Yu(e){return Dn(JSON.parse(e))}function ya(e){let t="1.2.11";if(e===t)return;let[n,r]=e.split(".").map(Number),[u,o]=t.split(".").map(Number);if(!(n===0&&u===0&&r===o)&&n!==u)throw new V(gt,{codamaVersion:t,rootVersion:e})}return Sa(Ju);})();
